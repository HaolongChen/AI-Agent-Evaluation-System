generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model account {
  id                                                                                            BigInt                                                   @id
  username                                                                                      String                                                   @unique
  password                                                                                      String
  phone_number                                                                                  String?                                                  @unique(map: "udx_account_by_phone_number")
  oauth2_user_info_map                                                                          Json                                                     @default("{}")
  email                                                                                         String?                                                  @unique(map: "udx_account_by_email")
  created_at                                                                                    DateTime                                                 @db.Timestamptz(6)
  balance                                                                                       Decimal?                                                 @default(0) @db.Decimal
  source_channel                                                                                String?
  tags                                                                                          Json                                                     @default("{}")
  user_profile                                                                                  Json                                                     @default("{}")
  display_name                                                                                  String
  exid                                                                                          String?                                                  @unique(map: "udx_account_by_exid") @default(dbgenerated("hashids.encode(id, 'jKI0W'::text)"))
  merging_with_another_account                                                                  Boolean?                                                 @default(false)
  utm                                                                                           Json?
  referrer_promo_code_id                                                                        BigInt?
  avatar_key                                                                                    String?
  status                                                                                        String                                                   @default("NORMAL")
  promo_code_account_referrer_promo_code_idTopromo_code                                         promo_code?                                              @relation("account_referrer_promo_code_idTopromo_code", fields: [referrer_promo_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account_combination_request_account_combination_request_account_with_phone_numberToaccount    account_combination_request[]                            @relation("account_combination_request_account_with_phone_numberToaccount")
  account_combination_request_account_combination_request_account_without_phone_numberToaccount account_combination_request[]                            @relation("account_combination_request_account_without_phone_numberToaccount")
  account_feature                                                                               account_feature[]
  account_module                                                                                account_module[]
  account_oauth2_client                                                                         account_oauth2_client[]
  account_read_app                                                                              account_read_app[]
  account_read_project_capability_downgrade_notification                                        account_read_project_capability_downgrade_notification[]
  account_role                                                                                  account_role[]
  account_session_duration                                                                      account_session_duration[]
  account_sign_scene                                                                            account_sign_scene[]
  account_stats                                                                                 account_stats?
  account_template                                                                              account_template[]
  af_code_template                                                                              af_code_template[]
  alipay_account                                                                                alipay_account?
  alipay_subscription                                                                           alipay_subscription[]
  balance_recharge                                                                              balance_recharge[]
  balance_transaction_record                                                                    balance_transaction_record[]
  beginner_guide                                                                                beginner_guide?
  code_component_package                                                                        code_component_package[]
  commission                                                                                    commission[]
  commission_item                                                                               commission_item[]
  company_invoice_profile                                                                       company_invoice_profile[]
  computing_power_cart_item                                                                     computing_power_cart_item[]
  dangerous_controller_audit                                                                    dangerous_controller_audit[]
  data_visualizer_account                                                                       data_visualizer_account[]
  deployment_record                                                                             deployment_record[]
  editor_component                                                                              editor_component[]
  educational_discount_and_account                                                              educational_discount_and_account[]
  feedback                                                                                      feedback[]
  individual_invoice_profile                                                                    individual_invoice_profile[]
  invitation_token                                                                              invitation_token[]
  invoice_request                                                                               invoice_request[]
  market_reward_record                                                                          market_reward_record[]
  message                                                                                       message[]
  message_content                                                                               message_content[]
  organization_member                                                                           organization_member[]
  payment                                                                                       payment[]
  popup                                                                                         popup[]
  project_account                                                                               project_account[]
  project_reset_record                                                                          project_reset_record[]
  project_template_commission                                                                   project_template_commission[]
  project_template_feedback                                                                     project_template_feedback[]
  project_transfer_project_transfer_original_owner_account_idToaccount                          project_transfer[]                                       @relation("project_transfer_original_owner_account_idToaccount")
  project_transfer_project_transfer_target_account_idToaccount                                  project_transfer[]                                       @relation("project_transfer_target_account_idToaccount")
  project_version                                                                               project_version[]
  promo_code_promo_code_account_idToaccount                                                     promo_code[]                                             @relation("promo_code_account_idToaccount")
  purchase_order                                                                                purchase_order[]
  share_token                                                                                   share_token[]
  stripe_account                                                                                stripe_account[]
  stripe_customer_info                                                                          stripe_customer_info?
  template_audit_record                                                                         template_audit_record[]
  template_step_and_account                                                                     template_step_and_account[]
  user_question_answer                                                                          user_question_answer[]
  user_tutorial_preference                                                                      user_tutorial_preference[]
  verification_code                                                                             verification_code[]
  web_app                                                                                       web_app[]
  web_app_account                                                                               web_app_account[]
  web_app_schema                                                                                web_app_schema[]
  web_app_version                                                                               web_app_version[]
  wechat_mini_program_app                                                                       wechat_mini_program_app[]
  wechat_mini_program_app_account                                                               wechat_mini_program_app_account[]
  wechat_mini_program_app_schema                                                                wechat_mini_program_app_schema[]
  wechat_mini_program_app_version                                                               wechat_mini_program_app_version[]

  @@index([oauth2_user_info_map(ops: JsonbPathOps)], map: "idx_account_by_oauth_provider_json_path_ops", type: Gin)
  @@index([username], map: "idx_of_b_tree_on_username_in_account")
}

model account_combination_request {
  id                                                                        BigInt   @id @default(autoincrement())
  account_without_phone_number                                              BigInt
  phone_number                                                              String
  account_with_phone_number                                                 BigInt
  status                                                                    String
  created_at                                                                DateTime @db.Timestamptz(6)
  account_account_combination_request_account_with_phone_numberToaccount    account  @relation("account_combination_request_account_with_phone_numberToaccount", fields: [account_with_phone_number], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account_account_combination_request_account_without_phone_numberToaccount account  @relation("account_combination_request_account_without_phone_numberToaccount", fields: [account_without_phone_number], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([account_without_phone_number, account_with_phone_number], map: "udx_account_combination_request_by_account_id_pair")
  @@index([account_with_phone_number], map: "idx_account_combination_request_by_account_wpn")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model account_feature {
  id           BigInt       @id @default(autoincrement())
  account_id   BigInt
  feature_id   BigInt
  enabled      Boolean
  account      account      @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_account_feature_to_account")
  feature_gate feature_gate @relation(fields: [feature_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_account_feature_to_feature")

  @@unique([account_id, feature_id], map: "udx_account_feature_by_account_id_and_feature_id")
}

model account_has_coupon {
  id                   BigInt                @id
  account_id           BigInt
  coupon_template_id   BigInt
  used_amount          BigInt
  total_amount         BigInt
  expire_at            DateTime              @db.Timestamptz(6)
  created_at           DateTime              @db.Timestamptz(6)
  updated_at           DateTime              @db.Timestamptz(6)
  effective_at         DateTime              @db.Timestamptz(6)
  reward_record_id     BigInt?
  coupon_template      coupon_template       @relation(fields: [coupon_template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  market_reward_record market_reward_record? @relation(fields: [reward_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  purchase_order       purchase_order[]

  @@index([account_id], map: "idx_account_has_coupon_by_account_id")
  @@index([coupon_template_id], map: "idx_account_has_coupon_by_coupon_template_id")
}

model account_module {
  id            BigInt        @id @default(autoincrement())
  module_id     BigInt
  account_id    BigInt
  created_at    DateTime?     @default(now()) @db.Timestamptz(6)
  account       account       @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  module_record module_record @relation(fields: [module_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([account_id, module_id], map: "udx_account_module_by_account_id_module_id")
  @@index([module_id], map: "idx_account_module_fk_module")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model account_oauth2_client {
  id                       BigInt                   @id
  account_id               BigInt
  oauth2_client_id         String
  account                  account                  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  oauth2_registered_client oauth2_registered_client @relation(fields: [oauth2_client_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model account_read_app {
  id                         BigInt                   @id @default(autoincrement())
  project_id                 BigInt?
  web_app_id                 BigInt?
  wechat_mini_program_app_id BigInt?
  account_id                 BigInt
  last_opened_at             DateTime?                @db.Timestamptz(6)
  account                    account                  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                    project?                 @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app                    web_app?                 @relation(fields: [web_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  wechat_mini_program_app    wechat_mini_program_app? @relation(fields: [wechat_mini_program_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([account_id, project_id], map: "udx_account_read_app_by_account_id_and_project_id")
  @@unique([account_id, web_app_id], map: "udx_account_read_app_by_account_id_and_web_app_id")
  @@unique([account_id, wechat_mini_program_app_id], map: "udx_account_read_app_by_account_id_and_wechat_mini_id")
  @@index([account_id, last_opened_at(sort: Desc)], map: "idx_account_read_app_by_account_id_and_last_opened_at")
  @@index([last_opened_at], map: "idx_account_read_app_by_last_opened_at")
}

model account_read_project_capability_downgrade_notification {
  id                                        BigInt                                    @id
  notification_id                           BigInt
  account_id                                BigInt
  created_at                                DateTime                                  @db.Timestamptz(6)
  updated_at                                DateTime                                  @db.Timestamptz(6)
  project_capability_downgrade_notification project_capability_downgrade_notification @relation(fields: [notification_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "account_read_project_capability_downgrade__notification_id_fkey")
  account                                   account                                   @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "account_read_project_capability_downgrade_notif_account_id_fkey")

  @@unique([notification_id, account_id], map: "udx_read_capability_downgrade_notification_by_notification_id_a")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model account_role {
  id         BigInt  @id
  account_id BigInt
  role_id    BigInt
  account    account @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_account_role_account_id_account_id")
  role       role    @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_account_role_role_id_role_id")

  @@index([account_id], map: "idx_account_role_by_account_id")
  @@index([role_id], map: "idx_account_role_by_role_id")
}

model account_session_duration {
  account_id       BigInt
  session_duration Unsupported("interval")?
  project_id       BigInt
  operation_date   DateTime                 @db.Date
  account          account                  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project          project                  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([account_id, project_id, operation_date], map: "unique_key")
  @@index([project_id], map: "idx_account_session_duration_by_project_id")
}

model account_sign_scene {
  id                     BigInt              @id
  account_id             BigInt
  sign_scene             String
  alipay_subscription_id BigInt
  created_at             DateTime            @db.Timestamptz(6)
  account                account             @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  alipay_subscription    alipay_subscription @relation(fields: [alipay_subscription_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_account_sign_scene_by_account_id")
  @@index([alipay_subscription_id], map: "idx_account_sign_scene_by_alipay_subscription_id")
}

model account_stats {
  account_id                     BigInt    @id
  project_count                  BigInt    @default(0)
  diff_count                     BigInt    @default(0)
  diff_count_for_ranking         BigInt    @default(0)
  diff_count_ranking             Float?    @default(0)
  diff_count_ranking_computed_at DateTime? @db.Timestamptz(6)
  account                        account   @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([diff_count_for_ranking], map: "idx_diff_count_for_ranking")
}

model account_technical_support {
  account_id      BigInt   @id
  available_hours Float
  created_at      DateTime @db.Timestamptz(6)
  updated_at      DateTime @db.Timestamptz(6)
}

model account_template {
  id               BigInt           @id @default(autoincrement())
  account_id       BigInt
  template_id      BigInt
  created_at       DateTime?        @default(now()) @db.Timestamptz(6)
  account          account          @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_template project_template @relation(fields: [template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([account_id, template_id], map: "udx_account_template_by_account_id_template_id")
  @@index([template_id], map: "idx_account_template_by_template_id")
}

model action_flow_entity {
  id                  BigInt         @id
  schema_id           BigInt
  unique_id           String         @db.Uuid
  version_id          Int
  action_flow_content Json
  status              String
  created_at          DateTime?      @default(now()) @db.Timestamptz(6)
  project_schema      project_schema @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([schema_id, unique_id, version_id], map: "udx_action_flow_by_unique_and_version_id_and_schema_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model advanced_functionality_tutorial {
  id                    BigInt    @id
  functionality         String    @unique(map: "udx_advanced_functionality_tutorial_by_functionality")
  tutorial_video_url    String
  tutorial_document_url String
  description           String
  created_at            DateTime  @db.Timestamptz(6)
  updated_at            DateTime? @db.Timestamptz(6)
  english_title         String?
  chinese_title         String?
  english_content       String?
  chinese_content       String?
}

model af_code_template {
  id             BigInt    @id
  input_type     Json
  output_type    Json
  code           Json
  logo_url       String
  template_group String
  author         BigInt
  version        String?
  display_name   String
  status         String
  created_at     DateTime? @db.Timestamptz(6)
  updated_at     DateTime? @db.Timestamptz(6)
  account        account   @relation(fields: [author], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([author], map: "idx_af_code_template_author")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ali_payment_info {
  id                     BigInt              @id
  payment_id             BigInt
  alipay_subscription_id BigInt
  out_trade_no           String?
  created_at             DateTime            @db.Timestamptz(6)
  alipay_subscription    alipay_subscription @relation(fields: [alipay_subscription_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment                payment             @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([alipay_subscription_id], map: "idx_ali_payment_info_by_alipay_subscription_id")
  @@index([payment_id], map: "idx_ali_payment_info_by_payment_id")
}

model alipay_account {
  id                BigInt  @id
  account_id        BigInt  @unique(map: "udx_alipay_account_by_account_id")
  name              String
  type              String
  alipay_account_id String
  account           account @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model alipay_callback {
  id         BigInt    @id
  parameters Json
  created_at DateTime? @default(now()) @db.Timestamptz(6)
}

model alipay_complaint {
  id              BigInt   @id
  status          String
  trade_no        String   @unique(map: "udx_alipay_complaint_by_trade_no")
  feishu_notified Boolean? @default(false)
  created_at      DateTime @db.Timestamptz(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model alipay_direct_transfer {
  id                BigInt   @id
  transfer_amount   Decimal  @db.Decimal
  type              String
  status            String
  created_at        DateTime @db.Timestamptz(6)
  updated_at        DateTime @db.Timestamptz(6)
  out_biz_no        String
  account_name      String
  account_id_type   String
  alipay_account_id String
  details           Json?
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model alipay_subscription {
  id                      BigInt               @id
  account_id              BigInt
  product_id              BigInt
  agreement_no            String?
  current_period_start_at DateTime?            @db.Timestamptz(6)
  current_period_end_at   DateTime?            @db.Timestamptz(6)
  first_order_id          BigInt
  status                  String
  created_at              DateTime             @db.Timestamptz(6)
  external_agreement_no   String?
  first_charge_time       DateTime             @db.Timestamptz(6)
  account_sign_scene      account_sign_scene[]
  ali_payment_info        ali_payment_info[]
  account                 account              @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  purchase_order          purchase_order       @relation(fields: [first_order_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_alipay_subscription_by_account_id")
  @@index([first_order_id], map: "idx_alipay_subscription_by_first_order_id")
  @@index([product_id], map: "idx_alipay_subscription_by_product_id")
}

model alipay_transfer_info {
  id                     BigInt                   @id
  payment_id             BigInt
  commission_id          BigInt
  transfer_amount        Decimal                  @db.Decimal
  out_request_no         String
  account_name           String
  account_id_type        String
  alipay_account_id      String
  status                 String
  error_message          String?
  created_at             DateTime                 @db.Timestamptz(6)
  updated_at             DateTime                 @db.Timestamptz(6)
  transaction_no         String?
  commission             commission               @relation(fields: [commission_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment                payment                  @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  alipay_transfer_refund alipay_transfer_refund[]

  @@index([commission_id, payment_id], map: "idx_alipay_transfer_info_by_commission_payment")
}

model alipay_transfer_refund {
  id                   BigInt               @id
  transfer_id          BigInt
  refund_amount        Decimal              @db.Decimal
  out_request_no       String
  transaction_no       String?
  status               String
  error_message        String?
  created_at           DateTime             @db.Timestamptz(6)
  updated_at           DateTime             @db.Timestamptz(6)
  commission_refund_id BigInt?
  commission_refund    commission_refund?   @relation(fields: [commission_refund_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  alipay_transfer_info alipay_transfer_info @relation(fields: [transfer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([transfer_id], map: "idx_alipay_transfer_refund_by_transfer_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model aliyun_sms_template {
  id                   BigInt   @id
  template_code        String   @unique
  project_id           BigInt
  template_name        String
  template_content     String
  template_type        String
  template_description String
  template_status      String
  reason               String?
  created_at           DateTime @db.Timestamptz(6)
  updated_at           DateTime @db.Timestamptz(6)
  project              project  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id], map: "idx_aliyun_sms_template_project_id_fkey")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model audit_status_read {
  id              BigInt @id @default(autoincrement())
  project_id      BigInt
  account_id      BigInt
  audit_record_id BigInt

  @@unique([account_id, audit_record_id], map: "udx_audit_status_read_by_account_id_and_audit_record_id")
}

model balance_pay_subscription {
  id                   BigInt                 @id
  created_at           DateTime               @db.Timestamptz(6)
  updated_at           DateTime?              @db.Timestamptz(6)
  balance_payment_info balance_payment_info[]
}

model balance_payment_info {
  id                       BigInt                   @id
  payment_id               BigInt                   @unique(map: "udx_balance_payment_info_by_payment_id")
  subscription_id          BigInt
  payment                  payment                  @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  balance_pay_subscription balance_pay_subscription @relation(fields: [subscription_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([subscription_id], map: "udx_balance_payment_info_by_subscription_id")
}

model balance_payment_source {
  id               BigInt           @id
  payment_id       BigInt
  amount           Decimal          @db.Decimal
  from_recharge_id BigInt
  balance_recharge balance_recharge @relation(fields: [from_recharge_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment          payment          @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([from_recharge_id], map: "idx_balance_payment_source_by_from_recharge_id")
  @@index([payment_id], map: "idx_balance_payment_source_by_payment_id")
}

model balance_recharge {
  id                         BigInt                       @id
  type                       String
  deposit_payment_id         BigInt?
  created_at                 DateTime                     @db.Timestamptz(6)
  updated_at                 DateTime?                    @db.Timestamptz(6)
  account_id                 BigInt
  recharged_amount           Decimal                      @db.Decimal
  allocated_amount           Decimal                      @db.Decimal
  reward_record_id           BigInt?
  expire_at                  DateTime?                    @db.Timestamptz(6)
  deducted_after_expired     Boolean?                     @default(false)
  commission_id              BigInt?
  balance_payment_source     balance_payment_source[]
  account                    account                      @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  commission                 commission?                  @relation(fields: [commission_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment                    payment?                     @relation(fields: [deposit_payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  market_reward_record       market_reward_record?        @relation(fields: [reward_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  balance_transaction_record balance_transaction_record[]

  @@index([account_id], map: "idx_balance_recharge_by_account_id")
  @@index([expire_at], map: "idx_balance_recharge_by_expire_at")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model balance_transaction_record {
  id                      BigInt            @id
  account_id              BigInt
  status                  String?
  transaction_type        String?
  transaction_payment_id  BigInt?
  transaction_refund_id   BigInt?
  transaction_recharge_id BigInt?
  transaction_amount      Decimal?          @db.Decimal
  balance_before          Decimal?          @db.Decimal
  balance_after           Decimal?          @db.Decimal
  created_at              DateTime          @db.Timestamptz(6)
  updated_at              DateTime?         @db.Timestamptz(6)
  account                 account           @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment                 payment?          @relation(fields: [transaction_payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  balance_recharge        balance_recharge? @relation(fields: [transaction_recharge_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment_refund          payment_refund?   @relation(fields: [transaction_refund_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_balance_transaction_record_by_account_id")
  @@index([transaction_payment_id], map: "idx_balance_transaction_record_by_transaction_payment_id")
  @@index([transaction_recharge_id], map: "idx_balance_transaction_record_by_transaction_recharge_id")
  @@index([transaction_refund_id], map: "idx_balance_transaction_record_by_transaction_refund_id")
}

model banner_item {
  id           BigInt    @id
  image_url    String
  link_url     String
  description  String?
  effective_at DateTime  @db.Timestamptz(6)
  expire_at    DateTime? @db.Timestamptz(6)
  created_at   DateTime? @db.Timestamptz(6)
  updated_at   DateTime? @db.Timestamptz(6)

  @@index([effective_at, expire_at], map: "idx_banner_item_effective_at_and_expire_at")
}

model beginner_guide {
  id               BigInt   @id
  account_id       BigInt   @unique(map: "udx_account_id_by_beginner_guide")
  status           String
  last_step_id     Int
  created_at       DateTime @db.Timestamptz(6)
  updated_at       DateTime @db.Timestamptz(6)
  tutorial_version String?
  account          account  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model category {
  id                BigInt              @id @default(autoincrement())
  name              String              @unique(map: "udx_category_by_name")
  display_name      String?
  template_category template_category[]
}

model cdn_log_entity {
  id             BigInt   @id
  project_id     BigInt
  response_bytes Int
  requested_at   DateTime @db.Timestamptz(6)
  file_name      String
  line_num       Int
  request_uri    String?

  @@unique([file_name, line_num], map: "udx_cdn_log_entity_by_file_name_and_line_num")
  @@index([project_id, requested_at], map: "idx_cdn_log_entity_by_project_id_requested_at")
  @@index([project_id, requested_at, response_bytes], map: "idx_cdn_log_entity_by_project_id_requested_at_response_bytes")
}

model certificate {
  id           BigInt    @id
  cert_id      String?
  cert_name    String?
  cert_pub     String?
  cert_key     String?
  common_names Json?
  created_at   DateTime  @db.Timestamptz(6)
  deleted_at   DateTime? @db.Timestamptz(6)
}

model chat_gpt_request_record {
  id               BigInt    @id
  event_id         String?   @unique @db.Uuid
  account_id       BigInt?
  request_message  Json?
  model            String?
  score            Int?
  response_message Json?
  created_at       DateTime? @db.Timestamptz(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model cloud_configuration {
  id                         BigInt                  @id
  name                       String                  @unique(map: "udx_cloud_configuration_by_name")
  provider                   String                  @default("ALIYUN")
  bucket                     String
  kubernetes                 Json?
  queue                      Json?
  region_config              Json?
  cdn                        Json?
  authority                  Json?
  host_aliases               Json                    @default("[]")
  remote_logging_enabled     Boolean                 @default(true)
  log_config                 Json?
  dns                        Json?                   @default("{\"type\": \"AliyunDns\", \"value\": \"\", \"domain\": \"\", \"provider\": \"ALIYUN\", \"regionId\": \"\", \"accessKey\": \"\", \"accessSecert\": \"\"}")
  edge_service_configuration Json?                   @default("{\"bucket\": \"\", \"region\": \"\", \"endpoint\": \"\", \"provider\": \"ALIYUN\", \"accessKey\": \"\", \"edgeKvName\": \"\", \"accessSecret\": \"\", \"edgeScriptName\": \"\"}")
  deployment_env_config      deployment_env_config[]
  ziroom_server              ziroom_server[]
}

model code_component_package {
  id                                    BigInt                                  @id
  name                                  String
  creator                               BigInt
  created_at                            DateTime                                @db.Timestamptz(6)
  account                               account                                 @relation(fields: [creator], references: [id], onDelete: NoAction, onUpdate: NoAction)
  code_component_package_publish_record code_component_package_publish_record[]
  code_component_publish_record         code_component_publish_record[]
  project_code_component                project_code_component[]

  @@unique([creator, name])
}

model code_component_package_publish_record {
  id                            BigInt                          @id
  package_id                    BigInt
  index_js_file_key             String
  version                       String
  created_at                    DateTime                        @db.Timestamptz(6)
  doc_file_key                  String?
  demo_link                     String?
  icon_file_key                 String?
  platforms                     Json                            @default("[\"WEB\"]")
  repo_url                      String?
  code_component_package        code_component_package          @relation(fields: [package_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  code_component_publish_record code_component_publish_record[]

  @@unique([package_id, version])
}

model code_component_publish_record {
  id                                    BigInt                                @id
  package_id                            BigInt
  package_publish_record_id             BigInt
  version                               String
  name                                  String
  display_name                          String?
  description                           String?
  type                                  String
  category                              String
  preview_link                          String?
  definition                            Json
  created_at                            DateTime                              @db.Timestamptz(6)
  doc_file_key                          String?
  icon_image_key                        String?
  canvas_preview_image_key              String?
  cover_image_key                       String?
  code_component_package                code_component_package                @relation(fields: [package_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  code_component_package_publish_record code_component_package_publish_record @relation(fields: [package_publish_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([package_id, name, version])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model column_metadata_entity {
  id                 BigInt    @id
  column_metadata_id String    @db.Uuid
  table_metadata_id  BigInt
  name               String
  type               String
  primary_key        Boolean?
  required           Boolean?
  is_unique          Boolean?
  ui_hidden          Boolean?
  system_defined     Boolean?
  created_at         DateTime? @db.Timestamptz(6)
  display_name       String
  generated          Boolean?  @default(false)
  default_value      Json?
  formula            Json?

  @@index([table_metadata_id], map: "idx_column_metadata_entity_by_table_metadata_id")
}

model commission {
  id                              BigInt                            @id
  order_id                        BigInt
  commission_amount               Decimal                           @db.Decimal
  status                          String
  error_message                   String?
  created_at                      DateTime                          @db.Timestamptz(6)
  updated_at                      DateTime                          @db.Timestamptz(6)
  commission_account_id           BigInt?
  transfer_id                     BigInt?
  commission_reward_type          String                            @default("MONEY")
  alipay_transfer_info            alipay_transfer_info[]
  balance_recharge                balance_recharge[]
  account                         account?                          @relation(fields: [commission_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  purchase_order                  purchase_order                    @relation(fields: [order_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  commission_item                 commission_item[]
  commission_refund               commission_refund[]
  commission_refund_with_transfer commission_refund_with_transfer[]
  commission_with_transfer        commission_with_transfer[]
  stripe_transfer_info            stripe_transfer_info[]

  @@index([order_id], map: "idx_commission_by_order_id")
  @@index([id], map: "idx_commission_refund_by_commission_id")
}

model commission_item {
  id                        BigInt                 @id
  order_product_id          BigInt
  order_product_net_price   Decimal                @db.Decimal
  commission_amount         Decimal                @db.Decimal
  commission_id             BigInt
  commission_account_id     BigInt
  commission_rule_reward_id BigInt
  account                   account                @relation(fields: [commission_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  commission                commission             @relation(fields: [commission_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  commission_rule_reward    commission_rule_reward @relation(fields: [commission_rule_reward_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  order_product             order_product          @relation(fields: [order_product_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([commission_id], map: "idx_commission_item_by_commission_id")
  @@index([order_product_id], map: "idx_commission_item_by_order_product_id")
}

model commission_refund {
  id                     BigInt                   @id
  commission_id          BigInt
  amount                 Decimal                  @db.Decimal
  status                 String
  created_at             DateTime                 @db.Timestamptz(6)
  updated_at             DateTime                 @db.Timestamptz(6)
  transfer_id            BigInt?
  alipay_transfer_refund alipay_transfer_refund[]
  commission             commission               @relation(fields: [commission_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model commission_refund_with_transfer {
  id               BigInt      @id
  fund_transfer_id BigInt
  commission_id    BigInt?
  commission       commission? @relation(fields: [commission_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model commission_rule {
  id                      BigInt                    @id
  commission_role         String
  start_at                DateTime                  @db.Timestamptz(6)
  expire_at               DateTime                  @db.Timestamptz(6)
  commission_rule_reward  commission_rule_reward[]
  product_commission_rule product_commission_rule[]
  promo_code_product_rule promo_code_product_rule[]
}

model commission_rule_reward {
  id                     BigInt            @id
  commission_rule_id     BigInt
  commission_reward_type String            @default("MONEY")
  commission_rate        Decimal           @db.Decimal
  commission_item        commission_item[]
  commission_rule        commission_rule   @relation(fields: [commission_rule_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([commission_rule_id, commission_reward_type], map: "udx_commission_rule_reward_by_rule_id_and_type")
}

model commission_with_transfer {
  id               BigInt      @id
  fund_transfer_id BigInt
  commission_id    BigInt?
  commission       commission? @relation(fields: [commission_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model company_info {
  id                   BigInt   @id
  search_key           String
  company_name         String   @unique(map: "udx_company_info_by_company_name")
  tax_number           String?
  registration_address String?
  registration_phone   String?
  bank_name            String?
  bank_account_number  String?
  created_at           DateTime @db.Timestamptz(6)
  updated_at           DateTime @db.Timestamptz(6)

  @@index([search_key], map: "idx_company_info_by_search_key")
}

model company_invoice_profile {
  id                   BigInt   @id
  account_id           BigInt
  email                String
  company_name         String
  tax_number           String
  registration_address String
  registration_phone   String
  bank_name            String
  bank_account_number  String
  created_at           DateTime @db.Timestamptz(6)
  updated_at           DateTime @db.Timestamptz(6)
  account              account  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_company_invoice_profile_by_account_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model computing_power_addon {
  id              BigInt        @id
  project_id      BigInt?
  product_type    String
  quantity        Int
  start_at        DateTime      @db.Timestamptz(6)
  expire_at       DateTime?     @db.Timestamptz(6)
  organization_id BigInt?
  organization    organization? @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project         project?      @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id], map: "idx_computing_power_addon_id_by_project_id")
  @@index([organization_id], map: "idx_computing_power_addon_organization_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model computing_power_addon_resource {
  id                       BigInt        @id
  computing_power_addon_id BigInt
  project_id               BigInt?
  resource_type            String
  reset_cycle              String?
  amount                   Float
  expire_at                DateTime?     @db.Timestamptz(6)
  start_at                 DateTime      @db.Timestamptz(6)
  organization_id          BigInt?
  organization             organization? @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                  project?      @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id, resource_type, reset_cycle], map: "idx_computing_power_addon_resource_by_project_type_cycle")
  @@index([organization_id], map: "idx_computing_power_addon_resource_organization_id")
}

model computing_power_cart_item {
  id         BigInt   @id
  project_id BigInt
  account_id BigInt
  product_id BigInt
  quantity   Int
  created_at DateTime @db.Timestamptz(6)
  updated_at DateTime @db.Timestamptz(6)
  account    account  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project    project  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([project_id, account_id, product_id], map: "udx_computing_power_cart_item_by_project_account_product")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model computing_power_kit {
  id                           BigInt                         @id
  project_id                   BigInt?
  product_type                 String
  quantity                     Int
  start_at                     DateTime                       @db.Timestamptz(6)
  expire_at                    DateTime?                      @db.Timestamptz(6)
  organization_id              BigInt?
  payment_id                   BigInt?
  organization                 organization?                  @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment                      payment?                       @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                      project?                       @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  computing_power_kit_resource computing_power_kit_resource[]

  @@index([project_id], map: "idx_computing_power_kit_id_by_project_id")
  @@index([organization_id], map: "idx_computing_power_kit_organization_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model computing_power_kit_resource {
  id                     BigInt              @id
  computing_power_kit_id BigInt
  project_id             BigInt?
  resource_type          String
  reset_cycle            String?
  amount                 Float
  expire_at              DateTime?           @db.Timestamptz(6)
  start_at               DateTime            @db.Timestamptz(6)
  organization_id        BigInt?
  applied_to_server      Boolean             @default(false)
  computing_power_kit    computing_power_kit @relation(fields: [computing_power_kit_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  organization           organization?       @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                project?            @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id, resource_type, reset_cycle], map: "idx_computing_power_kit_resource_by_project_type_cycle")
  @@index([organization_id], map: "idx_computing_power_kit_resource_organization_id")
}

model copilot_error_log {
  id         BigInt    @id @default(autoincrement())
  session_id BigInt
  error_info Json?
  created_at DateTime? @default(now()) @db.Timestamptz(6)

  @@index([session_id], map: "idx_copilot_error_log_session_id")
}

model copilot_evaluation_log {
  id         BigInt    @id @default(autoincrement())
  session_id BigInt
  message_id BigInt?
  type       String?
  content    String?
  created_at DateTime? @default(now()) @db.Timestamptz(6)

  @@index([session_id], map: "idx_copilot_evaluation_log_session_id")
}

model copilot_llm_call_log {
  id         BigInt    @id @default(autoincrement())
  session_id BigInt
  model      String?
  content    Json?
  response   Json?
  time_cost  Int?
  token_cost Int?
  created_at DateTime? @default(now()) @db.Timestamptz(6)

  @@index([session_id], map: "idx_copilot_llm_call_log_session_id")
}

model copilot_session {
  id               BigInt    @id @default(autoincrement())
  project_id       BigInt
  account_id       BigInt
  title            String?
  job_state        Json?
  copilot_messages Json?
  terminated       Boolean?  @default(false)
  created_at       DateTime? @default(now()) @db.Timestamptz(6)
  updated_at       DateTime? @default(now()) @db.Timestamptz(6)

  @@index([created_at], map: "idx_copilot_session_created_at")
  @@index([project_id, account_id], map: "idx_copilot_session_project_id")
}

model country {
  country_code    String @id
  chinese_group   String
  phone_area_code String
  chinese_name    String
  english_name    String
}

model coupon_group {
  id                    BigInt                  @id
  description           String
  created_at            DateTime                @db.Timestamptz(6)
  updated_at            DateTime                @db.Timestamptz(6)
  coupon_group_item     coupon_group_item[]
  coupon_issuance_event coupon_issuance_event[]
}

model coupon_group_item {
  id                 BigInt          @id
  coupon_group_id    BigInt
  coupon_template_id BigInt
  amount             BigInt
  created_at         DateTime        @db.Timestamptz(6)
  updated_at         DateTime        @db.Timestamptz(6)
  coupon_group       coupon_group    @relation(fields: [coupon_group_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  coupon_template    coupon_template @relation(fields: [coupon_template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([coupon_group_id], map: "idx_coupon_group_item_by_coupon_group_id")
  @@index([coupon_template_id], map: "idx_coupon_group_item_by_coupon_template_id")
}

model coupon_issuance_event {
  id              BigInt       @id
  event_type      String
  coupon_group_id BigInt
  expire_at       DateTime     @db.Timestamptz(6)
  created_at      DateTime     @db.Timestamptz(6)
  updated_at      DateTime     @db.Timestamptz(6)
  coupon_group    coupon_group @relation(fields: [coupon_group_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model coupon_template {
  id                                   BigInt               @id
  discount_type                        String
  discount_amount                      Decimal              @db.Decimal
  minimum_order_amount                 Decimal?             @db.Decimal
  effective_at                         DateTime?            @db.Timestamptz(6)
  expire_at                            DateTime?            @db.Timestamptz(6)
  validity_period                      Json?
  applicable_plans                     Json?
  applicable_project_plans             Json?
  applicable_product_type_details      Json?
  created_at                           DateTime             @db.Timestamptz(6)
  updated_at                           DateTime             @db.Timestamptz(6)
  chinese_name                         String?
  english_name                         String?
  eligible_project_creation_start_time DateTime?            @db.Timestamptz(6)
  minimum_project_creation_time        DateTime?            @db.Timestamptz(6)
  account_has_coupon                   account_has_coupon[]
  coupon_group_item                    coupon_group_item[]
}

model custom_component {
  id                              BigInt                            @id
  repo_url                        String?
  tag                             String?
  creator                         BigInt?
  index_js_file_key               String?
  status                          String?
  created_at                      DateTime                          @db.Timestamptz(6)
  name                            String?
  archived                        Boolean?                          @default(false)
  metadata                        Json?
  custom_component_error_log      custom_component_error_log[]
  custom_component_items          custom_component_items[]
  custom_component_publish_record custom_component_publish_record[]
  project_has_custom_components   project_has_custom_components[]

  @@unique([repo_url, tag], map: "udx_custom_component_by_repo_and_tag")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model custom_component_error_log {
  id                  BigInt           @id
  custom_component_id BigInt
  error_type          String
  error_log           String
  created_at          DateTime         @db.Timestamptz(6)
  custom_component    custom_component @relation(fields: [custom_component_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([custom_component_id], map: "idx_custom_component_error_log_by_custom_component_id")
}

model custom_component_item_parameter {
  id                     BigInt                 @id
  field_name             String
  type                   String
  item_id                BigInt
  created_at             DateTime               @db.Timestamptz(6)
  custom_component_items custom_component_items @relation(fields: [item_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([item_id], map: "idx_custom_component_item_parameter_by_item_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model custom_component_items {
  id                              BigInt                            @id
  custom_component_id             BigInt
  name                            String
  cover_image_id                  BigInt
  published                       Boolean
  description                     String
  created_at                      DateTime                          @db.Timestamptz(6)
  custom_component_item_parameter custom_component_item_parameter[]
  stored_image                    stored_image                      @relation(fields: [cover_image_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  custom_component                custom_component                  @relation(fields: [custom_component_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([cover_image_id], map: "idx_custom_component_items_by_cover_image_id")
  @@index([custom_component_id], map: "idx_custom_component_items_by_custom_component_id")
}

model custom_component_publish_record {
  id                  BigInt           @id
  custom_component_id BigInt
  metadata            Json?
  tag                 String
  created_at          DateTime         @db.Timestamptz(6)
  updated_at          DateTime         @db.Timestamptz(6)
  custom_component    custom_component @relation(fields: [custom_component_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([custom_component_id, tag], map: "unique_on_custom_component_id_and_tag")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model custom_domain {
  id                                 BigInt   @id
  domain                             String
  project_id                         BigInt
  app_id                             BigInt?
  icp_verified                       Boolean?
  icp_info                           Json?
  custom_hostname_id                 String?
  host_ownership_verified            Boolean?
  host_ownership_verification_record Json?
  certification_verified             Boolean?
  certification_verification_record  Json?
  proxy_verified                     Boolean?
  proxy_verification_record          Json?
  status                             String?
  default_domain                     Boolean?
  favicon                            String?
  created_at                         DateTime @db.Timestamptz(6)
  updated_at                         DateTime @db.Timestamptz(6)
  project                            project  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id, app_id], map: "idx_custom_domain_by_project_id_app_id")
  @@index([status], map: "idx_custom_domain_by_status")
}

model custom_view {
  id                 BigInt          @id
  name               String
  data_visualizer_id BigInt
  config             Json?
  created_at         DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?       @default(now()) @db.Timestamptz(6)
  data_visualizer    data_visualizer @relation(fields: [data_visualizer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model dangerous_controller_audit {
  id                 BigInt   @id
  request_id         String
  trigger_account_id BigInt
  operation          String
  input_args         Json?
  result             Json?
  created_at         DateTime @db.Timestamptz(6)
  updated_at         DateTime @db.Timestamptz(6)
  account            account  @relation(fields: [trigger_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([request_id, trigger_account_id], map: "udx_dangerous_controller_audit_by_request_id_trigger_account_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model data_migration {
  id           BigInt   @id
  job_name     String?
  class_name   String   @unique
  description  String?
  started_at   DateTime @db.Timestamptz(6)
  completed_at DateTime @db.Timestamptz(6)
  created_at   DateTime @db.Timestamptz(6)
}

model data_visualizer {
  id                      BigInt                    @id
  name                    String
  project_id              BigInt
  role_config_unique_id   String                    @db.Uuid
  display_name_config     Json?                     @default("{}")
  created_at              DateTime?                 @default(now()) @db.Timestamptz(6)
  updated_at              DateTime?                 @default(now()) @db.Timestamptz(6)
  token_account_id        BigInt
  project_version_id      BigInt?
  custom_view             custom_view[]
  project                 project                   @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  data_visualizer_account data_visualizer_account[]
  share_token             share_token[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model data_visualizer_account {
  id                 BigInt          @id
  data_visualizer_id BigInt
  account_id         BigInt
  collaborator_type  String
  created_at         DateTime        @default(now()) @db.Timestamptz(6)
  updated_at         DateTime        @default(now()) @db.Timestamptz(6)
  account            account         @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  data_visualizer    data_visualizer @relation(fields: [data_visualizer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([data_visualizer_id, account_id], map: "udx_data_visualizer_account_by_data_visualizer_id_account_id")
}

model data_visualizer_draft {
  id                    BigInt         @id
  name                  String
  project_id            BigInt
  schema_id             BigInt
  role_config_unique_id String         @db.Uuid
  display_name_config   Json?          @default("{}")
  created_at            DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?      @default(now()) @db.Timestamptz(6)
  project_version_id    BigInt?
  project               project        @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_schema        project_schema @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model deployment_env_config {
  id                                BigInt                              @id
  schema_id                         BigInt
  project_id                        BigInt
  user_deployment_environment       String
  updated_at                        DateTime                            @db.Timestamptz(6)
  created_at                        DateTime                            @db.Timestamptz(6)
  currently_deploying_schema_id     BigInt?
  name                              String?
  status                            String?
  cloud_configuration_id            BigInt?
  zero_root_url                     String?
  zvm_image_version                 String?                             @default("master-d3547f1c")
  web_beta_domain                   String?
  web_domain                        String?
  project_version_id                BigInt?
  log_db_config                     Json?
  last_deployed_project_config      Json?
  project                           project                             @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_version                   project_version?                    @relation(fields: [project_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_schema                    project_schema                      @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  cloud_configuration               cloud_configuration?                @relation(fields: [cloud_configuration_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_deployment_env_config_cloud_configuration")
  deployment_event                  deployment_event[]
  deployment_record                 deployment_record[]
  project_deployment_info           project_deployment_info?
  synchronization_data_error_log    synchronization_data_error_log[]
  trigger_zvm_generator_record      trigger_zvm_generator_record[]
  ziroom_project_activation_record  ziroom_project_activation_record[]
  ziroom_project_hibernation_record ziroom_project_hibernation_record[]
  ziroom_project_migration_record   ziroom_project_migration_record[]
  ziroom_project_transfer_record    ziroom_project_transfer_record[]

  @@index([project_id], map: "idx_deployment_env_config_by_project_id")
  @@index([schema_id], map: "idx_deployment_env_config_by_schema_id")
  @@index([status], map: "idx_deployment_env_config_by_status")
  @@index([updated_at], map: "idx_deployment_env_config_by_updated_at")
  @@index([cloud_configuration_id], map: "idx_fk_deployment_env_config_cloud_configuration")
  @@index([created_at], map: "idx_project_by_created_at", type: Brin)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model deployment_error_handling {
  id                               BigInt             @id
  deployment_record_id             BigInt?
  deployment_error_type            String?
  deployment_error_handling_status String
  feedback                         String?
  created_at                       DateTime           @db.Timestamptz(6)
  updated_at                       DateTime?          @db.Timestamptz(6)
  handler_id                       BigInt?
  project_id                       BigInt?
  error_log                        String?
  deployment_record                deployment_record? @relation(fields: [deployment_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  employee                         employee?          @relation(fields: [handler_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                          project?           @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([deployment_record_id], map: "idx_deployment_error_handling_by_deployment_record_id")
  @@index([project_id], map: "idx_deployment_error_handling_by_project_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model deployment_event {
  id                       BigInt                 @id
  project_id               BigInt
  schema_id                BigInt
  status                   String
  created_at               DateTime               @db.Timestamptz(6)
  updated_at               DateTime?              @db.Timestamptz(6)
  deployment_env_config_id BigInt?
  details                  Json?
  deployment_record_id     BigInt?
  deployment_env_config    deployment_env_config? @relation(fields: [deployment_env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  deployment_record        deployment_record?     @relation(fields: [deployment_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                  project                @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_schema           project_schema         @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([deployment_record_id], map: "idx_deployment_event_by_deployment_record_id")
  @@index([deployment_env_config_id], map: "idx_deployment_event_deployment_env_config_id_fkey")
  @@index([project_id], map: "idx_deployment_event_project_id_fkey")
  @@index([schema_id], map: "idx_deployment_event_schema_id_fkey")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model deployment_output {
  id                    BigInt             @id
  project_id            BigInt?
  status                String?
  log                   String?
  created_at            DateTime?          @db.Timestamptz(6)
  schema_id             BigInt?
  deployment_record_id  BigInt?
  deployment_error_type String?
  deployment_record     deployment_record? @relation(fields: [deployment_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([deployment_record_id], map: "idx_deployment_output_by_deployment_record_id")
  @@index([project_id], map: "idx_deployment_output_by_project_id")
  @@index([schema_id], map: "idx_deployment_output_by_schema_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model deployment_record {
  id                                  BigInt                           @id(map: "deployment_pkey")
  project_id                          BigInt
  schema_id                           BigInt
  deployment_env_config_id            BigInt
  migration_file_keys                 Json?                            @default("[]")
  support_service_image_version       String?
  artifacts                           Json                             @default("{}")
  pipeline_platforms                  Json                             @default("[]")
  status                              String
  created_at                          DateTime                         @db.Timestamptz(6)
  updated_at                          DateTime                         @db.Timestamptz(6)
  build_targets_status                Json                             @default("{}")
  triggered_by_account_id             BigInt
  mobile_web_path_config_by_file_name Json?                            @default("{}")
  web_path_config_by_file_name        Json?                            @default("{}")
  zero_root_url                       String?
  deployment_error_handling           deployment_error_handling[]
  deployment_event                    deployment_event[]
  deployment_output                   deployment_output[]
  deployment_env_config               deployment_env_config            @relation(fields: [deployment_env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "deployment_deployment_env_config_id_fkey")
  project                             project                          @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "deployment_project_id_fkey")
  account                             account                          @relation(fields: [triggered_by_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_schema                      project_schema                   @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "deployment_schema_id_fkey")
  synchronization_data_error_log      synchronization_data_error_log[]

  @@index([deployment_env_config_id], map: "idx_deployment_record_by_env_config_id")
  @@index([project_id, id], map: "idx_deployment_record_by_project_id")
  @@index([schema_id], map: "idx_deployment_record_by_schema_id")
  @@index([triggered_by_account_id], map: "idx_deployment_record_by_triggered_by_account_id")
  @@index([deployment_env_config_id, zero_root_url], map: "idx_deployment_record_deployment_env_config_id_and_zero_root_ur")
  @@index([updated_at], map: "idx_deployment_record_on_updated_at")
  @@index([project_id, zero_root_url], map: "idx_deployment_record_project_id_and_zero_root_url")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model deployment_status_read {
  id                   BigInt  @id @default(autoincrement())
  project_id           BigInt
  account_id           BigInt
  deployment_record_id BigInt
  build_target         String?

  @@unique([account_id, deployment_record_id], map: "udx_deployment_status_read_by_account_id_and_deployment_record_")
}

model dingtalk_corp_info {
  id             BigInt    @id
  corp_id        String    @unique
  corp_name      String
  permanent_code String?
  activated      Boolean?
  relieved       Boolean?
  created_at     DateTime? @db.Timestamptz(6)
  updated_at     DateTime? @db.Timestamptz(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model dingtalk_event {
  id           BigInt   @id
  event_type   String
  event_detail Json
  created_at   DateTime @db.Timestamptz(6)
}

model domain_certificate {
  id      BigInt  @id
  domain  String?
  cert_id String?
}

model editor_component {
  id                 BigInt        @id
  creator_account_id BigInt
  source_project_id  BigInt
  name               String
  description        String
  platforms          Json
  m_ref_map          Json
  cover_image_id     BigInt?
  created_at         DateTime      @db.Timestamptz(6)
  updated_at         DateTime      @db.Timestamptz(6)
  zed_version        String
  root_m_ref         String?
  stored_image       stored_image? @relation(fields: [cover_image_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account            account       @relation(fields: [creator_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project            project       @relation(fields: [source_project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([creator_account_id], map: "idx_editor_component_by_creator_account_id")
  @@index([source_project_id], map: "idx_editor_component_by_source_project_id")
}

model educational_discount_and_account {
  id                         BigInt                   @id
  account_id                 BigInt
  role                       String?
  educational_institution_id BigInt?
  expired_at                 DateTime                 @db.Timestamptz(6)
  discount                   Decimal                  @db.Decimal
  created_at                 DateTime                 @db.Timestamptz(6)
  updated_at                 DateTime                 @db.Timestamptz(6)
  notification_read          Boolean?                 @default(false)
  educational_institution    educational_institution? @relation(fields: [educational_institution_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "educational_discount_and_accoun_educational_institution_id_fkey")
  account                    account                  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_educational_discount_and_account_by_account_id")
}

model educational_institution {
  id                               BigInt                             @id
  name                             String
  logo_image_id                    BigInt
  created_at                       DateTime                           @db.Timestamptz(6)
  updated_at                       DateTime                           @db.Timestamptz(6)
  educational_discount_and_account educational_discount_and_account[]
  stored_image                     stored_image                       @relation(fields: [logo_image_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([logo_image_id], map: "idx_educational_institution_by_logo_image_id")
}

model employee {
  id                        BigInt                      @id @default(autoincrement())
  name                      String
  feishu_user_id            String
  department                String
  status                    String
  deployment_error_handling deployment_error_handling[]
}

model env_merge_record {
  id                      BigInt   @id
  triggered_account_id    BigInt
  project_id              BigInt
  from_project_version_id BigInt?
  to_project_version_id   BigInt?
  status                  String
  allow_validation_error  Boolean
  error_type              String?
  error_message           String?
  created_at              DateTime @db.Timestamptz(6)
  updated_at              DateTime @db.Timestamptz(6)
  rebuild_dev             Boolean? @default(true)
  merge_type              String?
  merge_target_by_status  Json?

  @@index([project_id, created_at], map: "idx_env_merge_record_by_project_id_created_at")
}

model error_log {
  id         BigInt   @id
  data       Json?
  type       String
  stacktrace String?
  created_at DateTime @db.Timestamptz(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model event_trigger {
  id             BigInt   @id
  project_id     BigInt
  schema_id      BigInt
  table_name     String
  operation_type String
  trigger_name   String
  exchange_name  String
  trigger        Json
  created_at     DateTime @db.Timestamptz(6)
  queue_name     String
  column_names   String[]
  type           String?

  @@unique([schema_id, trigger_name], map: "udx_trigger_by_schema_id_trigger_name")
  @@index([project_id], map: "idx_event_trigger_by_project_id")
}

model external_user_group_account {
  id                  BigInt @id @default(autoincrement())
  external_user_group String
  account_id          BigInt

  @@unique([external_user_group, account_id], map: "group_account")
}

model failed_schema_migration_log {
  id             BigInt         @id @default(autoincrement())
  schema_id      BigInt
  reason         String
  project_schema project_schema @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([schema_id], map: "idx_failed_schema_migration_log_by_schema_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model failure_event_record {
  id           BigInt   @id
  exchange     String
  queue_name   String
  delivery_tag BigInt
  message_id   String
  message_body Json?
  error        Json
  created_at   DateTime @db.Timestamptz(6)

  @@index([created_at], map: "failure_event_record_by_created_time")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model feature_gate {
  id              BigInt            @id @default(autoincrement())
  name            String            @unique(map: "udx_feature_gate_by_name")
  status          String
  created_at      DateTime?         @default(now()) @db.Timestamptz(6)
  created_by      BigInt
  description     String            @default("")
  account_feature account_feature[]
  project_feature project_feature[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model feedback {
  id         BigInt   @id
  message    String?
  account_id BigInt?
  media_urls String[]
  misc_data  Json?
  created_at DateTime @db.Timestamptz(6)
  account    account? @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_feedback_by_account_id")
  @@index([created_at], map: "idx_feedback_by_created_at", type: Brin)
}

model flyway_schema_history {
  installed_rank Int      @id(map: "flyway_schema_history_pk")
  version        String?  @db.VarChar(50)
  description    String   @db.VarChar(200)
  type           String   @db.VarChar(20)
  script         String   @db.VarChar(1000)
  checksum       Int?
  installed_by   String   @db.VarChar(100)
  installed_on   DateTime @default(now()) @db.Timestamp(6)
  execution_time Int
  success        Boolean

  @@index([success], map: "flyway_schema_history_s_idx")
}

/// This table has subclasses and requires additional setup for migrations. Visit https://pris.ly/d/table-inheritance for more info.
model fund_transfer_base {
  id              BigInt   @id
  transfer_amount Decimal  @db.Decimal
  type            String
  status          String
  created_at      DateTime @db.Timestamptz(6)
  updated_at      DateTime @db.Timestamptz(6)
  details         Json?
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model fz_sms_stats {
  id         BigInt   @id
  day_start  DateTime @db.Timestamptz(6)
  day_end    DateTime @db.Timestamptz(6)
  project_id BigInt?
  count      Int?

  @@index([day_start], map: "idx_fz_sms_stats_by_day_start")
}

model fz_sms_usage_record {
  id              BigInt   @id @default(autoincrement())
  phone_number    String
  signature_name  String
  template_code   String
  template_params Json?
  status          String
  error_code      String?
  created_at      DateTime @db.Timestamptz(6)

  @@index([created_at], map: "idx_fz_sms_usage_record_by_created_at", type: Brin)
}

model individual_invoice_profile {
  id             BigInt   @id
  account_id     BigInt
  full_name      String
  email          String
  id_card_number String
  created_at     DateTime @db.Timestamptz(6)
  updated_at     DateTime @db.Timestamptz(6)
  account        account  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_individual_invoice_profile_by_account_id")
}

model invitation_token {
  id              BigInt       @id @default(autoincrement())
  organization_id BigInt
  inviter_id      BigInt
  expired_at      DateTime     @db.Timestamptz(6)
  account         account      @relation(fields: [inviter_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  organization    organization @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model invoice_request {
  id                    BigInt                  @id
  account_id            BigInt
  amount                Decimal                 @db.Decimal
  invoice_type          String
  status                String
  invoice_profile_type  String
  invoice_profile       Json
  invoice_file_key      String?
  failure_reason        String?
  created_at            DateTime                @db.Timestamptz(6)
  updated_at            DateTime                @db.Timestamptz(6)
  memo                  String?
  account               account                 @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  invoice_request_order invoice_request_order[]

  @@index([account_id], map: "idx_invoice_request_by_account_id")
  @@index([status], map: "idx_invoice_request_by_status")
}

model invoice_request_order {
  id                 BigInt          @id
  invoice_request_id BigInt
  order_id           BigInt
  amount             Decimal         @db.Decimal
  invoice_request    invoice_request @relation(fields: [invoice_request_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  purchase_order     purchase_order  @relation(fields: [order_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([invoice_request_id], map: "idx_invoice_request_order_by_invoice_request_id")
  @@index([order_id], map: "idx_invoice_request_order_by_order_id")
}

model key_value_entity {
  key        String    @id
  created_at DateTime? @db.Timestamptz(6)
  updated_at DateTime? @db.Timestamptz(6)
  value      Json
  version    BigInt?   @default(0)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model latest_successful_deployment {
  id                       BigInt
  project_id               BigInt
  deployment_env_config_id BigInt
  platform                 String
  project_version_id       BigInt?
  frontend_app_id          BigInt?
  schema_id                BigInt
  deployment_record_id     BigInt
  created_at               DateTime? @db.Timestamptz(6)
  updated_at               DateTime? @db.Timestamptz(6)

  @@unique([deployment_env_config_id, platform, frontend_app_id], map: "udx_latest_successful_deployment_on_decid_platform_faid")
  @@index([project_id, platform], map: "idx_latest_successful_deployment_on_project_id_platform")
  @@ignore
}

model market_reward_record {
  id                    BigInt               @id
  market_reward_rule_id BigInt?
  reward_details        Json
  account_id            BigInt
  created_at            DateTime             @db.Timestamptz(6)
  account_has_coupon    account_has_coupon[]
  balance_recharge      balance_recharge[]
  account               account              @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  market_reward_rule    market_reward_rule?  @relation(fields: [market_reward_rule_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_market_reward_record_by_account_id")
}

model market_reward_rule {
  id                   BigInt                 @id
  trigger_type         String?
  triggered_event_type String
  reward_details       Json
  created_at           DateTime               @db.Timestamptz(6)
  expire_at            DateTime?              @db.Timestamptz(6)
  promo_code_id        BigInt?
  effective_at         DateTime               @default(now()) @db.Timestamptz(6)
  redemption_code_id   BigInt?
  new_user_only        Boolean                @default(false)
  market_reward_record market_reward_record[]
  promo_code           promo_code?            @relation(fields: [promo_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  redemption_code      redemption_code?       @relation(fields: [redemption_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([promo_code_id], map: "idx_market_reward_rule_by_promo_code_id")
  @@index([redemption_code_id], map: "idx_market_reward_rule_by_redemption_code_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model message {
  id                      BigInt           @id
  message_content_id      BigInt?
  receiver_account_id     BigInt
  status                  String
  created_at              DateTime?        @db.Timestamptz(6)
  language                String?          @default("ZH")
  message_detail          Json?
  expire_at               DateTime?        @db.Timestamptz(6)
  presentation_type       String           @default("STATIC")
  dynamic_message_content Json?
  sender_account_id       BigInt?
  category                String?
  message_content         message_content? @relation(fields: [message_content_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account                 account          @relation(fields: [receiver_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  message_popup           message_popup[]

  @@unique([receiver_account_id, message_content_id], map: "udx_message_by_receiver_account_id_and_message_content_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model message_content {
  id                         BigInt        @id
  title                      String?
  text_content               String?
  image_id                   BigInt?
  video_id                   BigInt?
  sender_account_id          BigInt?
  category                   String
  created_at                 DateTime      @db.Timestamptz(6)
  text_content_by_locale_str Json
  title_by_locale_str        Json
  message                    message[]
  stored_image               stored_image? @relation(fields: [image_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account                    account?      @relation(fields: [sender_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  stored_video               stored_video? @relation(fields: [video_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([text_content(ops: raw("gin_trgm_ops"))], map: "idx_message_content_by_text_content", type: Gin)
  @@index([title(ops: raw("gin_trgm_ops"))], map: "idx_message_content_by_title", type: Gin)
}

model message_popup {
  id          BigInt  @id
  message_id  BigInt
  popup_area  String
  project_ids Json?
  project_id  BigInt?
  message     message @relation(fields: [message_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([message_id, popup_area, project_id], map: "udx_message_popup_by_message_id_popup_area_project_id")
}

model module_record {
  id             BigInt           @id @default(autoincrement())
  unique_id      String           @db.Uuid
  version_id     Int
  module_content Json
  created_at     DateTime?        @default(now()) @db.Timestamptz(6)
  account_module account_module[]
  project_module project_module[]

  @@unique([unique_id, version_id], map: "udx_module_by_unique_id_version_id")
}

model oauth2_authorization {
  id                            String                   @id
  registered_client_id          String
  principal_name                String
  authorization_grant_type      String
  attributes                    String?
  state                         String?
  authorization_code_value      String?
  authorization_code_issued_at  DateTime?                @db.Timestamp(6)
  authorization_code_expires_at DateTime?                @db.Timestamp(6)
  authorization_code_metadata   String?
  access_token_value            String?
  access_token_issued_at        DateTime?                @db.Timestamp(6)
  access_token_expires_at       DateTime?                @db.Timestamp(6)
  access_token_metadata         String?
  access_token_type             String?
  access_token_scopes           String?
  oidc_id_token_value           String?
  oidc_id_token_issued_at       DateTime?                @db.Timestamp(6)
  oidc_id_token_expires_at      DateTime?                @db.Timestamp(6)
  oidc_id_token_metadata        String?
  refresh_token_value           String?
  refresh_token_issued_at       DateTime?                @db.Timestamp(6)
  refresh_token_expires_at      DateTime?                @db.Timestamp(6)
  refresh_token_metadata        String?
  user_code_value               String?
  user_code_issued_at           DateTime?                @db.Timestamp(6)
  user_code_expires_at          DateTime?                @db.Timestamp(6)
  user_code_metadata            String?
  device_code_value             String?
  device_code_issued_at         DateTime?                @db.Timestamp(6)
  device_code_expires_at        DateTime?                @db.Timestamp(6)
  device_code_metadata          String?
  authorized_scopes             String?
  oauth2_registered_client      oauth2_registered_client @relation(fields: [registered_client_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([registered_client_id], map: "idx_registered_client_id_by_oauth2_authorization")
}

model oauth2_authorization_consent {
  registered_client_id String
  principal_name       String
  authorities          String

  @@id([registered_client_id, principal_name])
}

model oauth2_registered_client {
  id                            String                  @id
  client_id                     String                  @unique(map: "udx_client_id_by_oauth2_registered_client")
  client_id_issued_at           DateTime                @default(now()) @db.Timestamp(6)
  client_secret                 String?
  client_secret_expires_at      DateTime?               @db.Timestamp(6)
  client_name                   String
  client_authentication_methods String
  authorization_grant_types     String
  redirect_uris                 String?
  scopes                        String
  client_settings               String
  token_settings                String
  post_logout_redirect_uris     String?
  account_oauth2_client         account_oauth2_client[]
  oauth2_authorization          oauth2_authorization[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model oauth2_scope_properties {
  id                   BigInt @id
  scope                String
  user_info_properties Json   @default("[]")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model order_product {
  id              BigInt            @id @default(autoincrement())
  order_id        BigInt
  product_id      BigInt
  product_details Json
  commission_item commission_item[]
  purchase_order  purchase_order    @relation(fields: [order_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  product         product           @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model organization {
  id                                                                               BigInt                           @id
  name                                                                             String
  plan_type                                                                        String                           @default("PERSONAL")
  plan_expire_at                                                                   DateTime?                        @db.Timestamptz(6)
  created_at                                                                       DateTime                         @db.Timestamptz(6)
  computing_power_addon                                                            computing_power_addon[]
  computing_power_addon_resource                                                   computing_power_addon_resource[]
  computing_power_kit                                                              computing_power_kit[]
  computing_power_kit_resource                                                     computing_power_kit_resource[]
  invitation_token                                                                 invitation_token[]
  organization_has_resource                                                        organization_has_resource[]
  organization_has_ziroom                                                          organization_has_ziroom[]
  organization_member                                                              organization_member[]
  organization_migration_organization_migration_from_organization_idToorganization organization_migration[]         @relation("organization_migration_from_organization_idToorganization")
  organization_migration_organization_migration_to_organization_idToorganization   organization_migration[]         @relation("organization_migration_to_organization_idToorganization")
  organization_resource_source                                                     organization_resource_source[]
  organization_resource_usage                                                      organization_resource_usage[]
  project                                                                          project[]
}

model organization_has_resource {
  id                BigInt       @id @default(autoincrement())
  organization_id   BigInt
  resource_type     String
  unlimited         Boolean
  amount            Float?
  expires_with_plan Boolean
  start_at          DateTime     @db.Timestamptz(6)
  expire_at         DateTime?    @db.Timestamptz(6)
  organization      organization @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([organization_id, resource_type], map: "udx_organization_has_resource_by_organization_id_and_resource_t")
}

model organization_has_ziroom {
  id               BigInt         @id
  organization_id  BigInt?
  ziroom_server_id BigInt?
  created_at       DateTime?      @db.Timestamptz(6)
  organization     organization?  @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  ziroom_server    ziroom_server? @relation(fields: [ziroom_server_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([organization_id, ziroom_server_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model organization_member {
  id                BigInt       @id
  organization_id   BigInt
  member_account_id BigInt
  role              String
  created_at        DateTime     @db.Timestamptz(6)
  updated_at        DateTime     @db.Timestamptz(6)
  account           account      @relation(fields: [member_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  organization      organization @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([organization_id, member_account_id], map: "udx_organization_member_by_org_id_and_member_id")
  @@index([member_account_id], map: "idx_organization_member_by_member_account_id")
}

model organization_migration {
  id                                                                     BigInt        @id
  project_id                                                             BigInt?
  from_organization_id                                                   BigInt?
  to_organization_id                                                     BigInt?
  created_at                                                             DateTime?     @default(now()) @db.Timestamptz(6)
  organization_organization_migration_from_organization_idToorganization organization? @relation("organization_migration_from_organization_idToorganization", fields: [from_organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                                                                project?      @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  organization_organization_migration_to_organization_idToorganization   organization? @relation("organization_migration_to_organization_idToorganization", fields: [to_organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([from_organization_id], map: "idx_organization_migration_by_from_organization_id")
  @@index([to_organization_id], map: "idx_organization_migration_by_to_organization_id")
  @@index([project_id], map: "idx_organization_migration_by_to_project_id")
}

model organization_resource_source {
  id                            BigInt                          @id
  organization_id               BigInt
  resource_type                 String
  amount                        Float
  start_at                      DateTime                        @db.Timestamptz(6)
  end_at                        DateTime                        @db.Timestamptz(6)
  source_detail                 Json
  organization                  organization                    @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_resource_credit_usage project_resource_credit_usage[]

  @@index([organization_id, resource_type, start_at], map: "idx_organization_resource_source_by_orgid_type_start_at")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model organization_resource_usage {
  id               BigInt       @id @default(autoincrement())
  organization_id  BigInt
  resource_type    String
  used_amount      Float
  available_amount Float?
  calculated_at    DateTime     @db.Timestamptz(6)
  unlimited        Boolean
  organization     organization @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([organization_id, resource_type], map: "idx_organization_resource_usage_by_organization_id_and_resource")
}

model oss_log_entity {
  id              BigInt    @id
  request_id      String?
  project_id      BigInt?
  delta_data_size BigInt?
  sent_bytes      BigInt?
  requested_at    DateTime? @db.Timestamptz(6)
  file_name       String?
  line_num        Int?
  request_uri     String?
  operation       String?

  @@unique([file_name, line_num], map: "udx_oss_log_entity_by_file_name_and_line_num")
  @@index([project_id, requested_at, sent_bytes], map: "idx_oss_log_entity_by_project_id_requested_at_sent_bytes")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model payment {
  id                         BigInt                       @id
  payment_type               String
  amount                     Decimal                      @db.Decimal
  currency                   String
  description                String
  status                     String
  created_at                 DateTime                     @db.Timestamptz(6)
  updated_at                 DateTime?                    @db.Timestamptz(6)
  purchase_order_id          BigInt?
  transaction_no             String?
  out_trade_no               String?
  purchaser_account_id       BigInt
  expire_at                  DateTime?                    @db.Timestamptz(6)
  payment_channel            String?                      @default("WEB")
  ali_payment_info           ali_payment_info[]
  alipay_transfer_info       alipay_transfer_info[]
  balance_payment_info       balance_payment_info?
  balance_payment_source     balance_payment_source[]
  balance_recharge           balance_recharge[]
  balance_transaction_record balance_transaction_record[]
  computing_power_kit        computing_power_kit[]
  purchase_order             purchase_order?              @relation(fields: [purchase_order_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account                    account                      @relation(fields: [purchaser_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment_refund             payment_refund[]
  payment_result_cache       payment_result_cache?
  project_plan_from_purchase project_plan_from_purchase[]
  stripe_payment_info        stripe_payment_info?
  stripe_transfer_info       stripe_transfer_info[]

  @@index([out_trade_no], map: "idx_payment_by_out_trade_no")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model payment_refund {
  id                         BigInt                       @id
  payment_id                 BigInt
  amount                     Decimal                      @db.Decimal
  status                     String
  created_at                 DateTime                     @db.Timestamptz(6)
  updated_at                 DateTime?                    @db.Timestamptz(6)
  transaction_no             String?
  result_message             String?
  balance_transaction_record balance_transaction_record[]
  payment                    payment                      @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "payment_refund_fk_payment_id")
}

model payment_result_cache {
  id             BigInt   @id
  session_id     String
  payment_type   String
  payment_result Json
  created_at     DateTime @db.Timestamptz(6)
  payment_id     BigInt   @unique(map: "udx_payment_cache_by_payment_id")
  payment        payment  @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model plan_type_info {
  id                 BigInt @id @default(autoincrement())
  plan_type          String
  dau_limit          Int
  no_watermark_limit Int
  collaborator_limit Int
}

model popup {
  id          BigInt    @id
  account_id  BigInt?
  description String?
  has_read    Boolean?
  created_at  DateTime? @default(now()) @db.Timestamptz(6)
  updated_at  DateTime? @default(now()) @db.Timestamptz(6)
  account     account?  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_popup_by_account_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model pre_created_project {
  id            BigInt    @id
  project_id    BigInt
  template_id   BigInt?
  created_at    DateTime? @db.Timestamptz(6)
  updated_at    DateTime? @db.Timestamptz(6)
  language_type String?   @default("ZH")
  project       project   @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id], map: "idx_fk_pre_created_project_project_id")
}

model pre_created_project_capacity {
  id                 BigInt            @id
  template_id        BigInt?
  ziroom_server_type String
  capacity           BigInt
  created_at         DateTime          @db.Timestamptz(6)
  project_template   project_template? @relation(fields: [template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([template_id, ziroom_server_type], map: "udx_pre_created_project_capacity_by_ziroom_type_and_template_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model pre_created_project_hit_record {
  id         BigInt    @id
  project_id BigInt
  cache_hit  Boolean?
  created_at DateTime? @db.Timestamptz(6)
  project    project   @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id], map: "idx_fk_pre_created_project_hit_record_project_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model product {
  id            BigInt          @id @default(autoincrement())
  type          String
  details       Json
  active        Boolean         @default(false)
  order_product order_product[]
}

model product_commission_rule {
  id                             BigInt                       @id
  promo_code_id                  BigInt?
  project_template_commission_id BigInt?
  commission_rule_id             BigInt
  root_product_type              String
  commission_rule                commission_rule              @relation(fields: [commission_rule_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_template_commission    project_template_commission? @relation(fields: [project_template_commission_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  promo_code                     promo_code?                  @relation(fields: [promo_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model project {
  id                                   BigInt                                 @id
  project_name                         String
  project_config                       Json?
  created_at                           DateTime                               @db.Timestamptz(6)
  updated_at                           DateTime?                              @db.Timestamptz(6)
  app_admin_account_ids                Json?                                  @default("[]")
  status                               String?
  organization_id                      BigInt
  branding_removed                     Boolean
  public_in_organization               Boolean                                @default(true)
  for_beginner_guide                   Boolean                                @default(false)
  type                                 String?                                @default("SINGLE_CLIENT")
  for_sale_template_id                 BigInt?
  category                             String?                                @default("OTHERS")
  account_read_app                     account_read_app[]
  account_session_duration             account_session_duration[]
  aliyun_sms_template                  aliyun_sms_template[]
  computing_power_addon                computing_power_addon[]
  computing_power_addon_resource       computing_power_addon_resource[]
  computing_power_cart_item            computing_power_cart_item[]
  computing_power_kit                  computing_power_kit[]
  computing_power_kit_resource         computing_power_kit_resource[]
  custom_domain                        custom_domain[]
  data_visualizer                      data_visualizer[]
  data_visualizer_draft                data_visualizer_draft[]
  deployment_env_config                deployment_env_config[]
  deployment_error_handling            deployment_error_handling[]
  deployment_event                     deployment_event[]
  deployment_record                    deployment_record[]
  editor_component                     editor_component[]
  organization_migration               organization_migration[]
  pre_created_project                  pre_created_project[]
  pre_created_project_hit_record       pre_created_project_hit_record[]
  organization                         organization                           @relation(fields: [organization_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_account                      project_account[]
  project_auto_deletion_record         project_auto_deletion_record[]
  project_code_component               project_code_component[]
  project_feature                      project_feature[]
  project_has_custom_components        project_has_custom_components[]
  project_module                       project_module[]
  project_plan_expiration_record       project_plan_expiration_record[]
  project_plan_from_purchase           project_plan_from_purchase?
  project_reset_record                 project_reset_record[]
  project_resource_consumption_record  project_resource_consumption_record[]
  project_resource_source              project_resource_source[]
  project_resource_usage               project_resource_usage[]
  project_rps_exceeded_record          project_rps_exceeded_record[]          @ignore
  project_transfer                     project_transfer[]
  project_version                      project_version[]
  project_with_template                project_with_template[]
  project_with_wechat_ids              project_with_wechat_ids?
  stripe_session                       stripe_session[]
  synchronization_data_error_log       synchronization_data_error_log[]
  trigger_zvm_generator_record         trigger_zvm_generator_record[]
  web_app                              web_app[]
  wechat_mini_program_app              wechat_mini_program_app[]
  wechat_miniprogram_auth_record       wechat_miniprogram_auth_record[]
  wechat_qr_code_route_entity          wechat_qr_code_route_entity[]
  ziroom_project_migration_appointment ziroom_project_migration_appointment[]

  @@index([organization_id], map: "idx_project_by_organization_id")
  @@index([organization_id, branding_removed, status], map: "idx_project_by_organizationid_and_branding_removed_and_status")
  @@index([status], map: "idx_project_by_status")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_account {
  id                    BigInt    @id
  project_id            BigInt
  account_id            BigInt
  collaborator_type     String
  permission            Json?     @default("{\"mcEnable\": true, \"cloneEnable\": true, \"dataAnalysisEnable\": true}")
  zed_state_by_platform Json      @default("{\"WEB\": {}, \"WECHAT\": {}}")
  created_at            DateTime? @db.Timestamptz(6)
  updated_at            DateTime? @db.Timestamptz(6)
  account               account   @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_project_account_to_account")
  project               project   @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_project_account_to_project")

  @@unique([project_id, account_id], map: "idx_project_account_by_project_id_account_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_auto_deletion_record {
  id         BigInt    @id
  project_id BigInt
  created_at DateTime? @db.Timestamptz(6)
  project    project   @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id], map: "idx_fk_project_auto_deletion_record_project_id")
}

model project_capability_downgrade_notification {
  id                                                     BigInt                                                   @id
  project_plan_expiration_record_id                      BigInt
  capability                                             String
  account_read_project_capability_downgrade_notification account_read_project_capability_downgrade_notification[]
  project_plan_expiration_record                         project_plan_expiration_record                           @relation(fields: [project_plan_expiration_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "project_capability_downgrade__project_plan_expiration_reco_fkey")

  @@unique([project_plan_expiration_record_id, capability], map: "udx_capability_downgrade_notification_by_record_id_capability")
}

model project_code_component {
  id                     BigInt                 @id
  package_id             BigInt
  project_id             BigInt
  created_at             DateTime               @db.Timestamptz(6)
  code_component_package code_component_package @relation(fields: [package_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                project                @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model project_config_and_version {
  id                 BigInt          @id
  project_config     Json
  project_version_id BigInt
  created_at         DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?       @default(now()) @db.Timestamptz(6)
  project_version    project_version @relation(fields: [project_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_version_id], map: "idx_project_config_and_version_by_project_version_id")
}

model project_deployment_info {
  deployment_env_config_id BigInt                @id
  ziroom_server_id         BigInt
  created_at               DateTime?             @default(now()) @db.Timestamptz(6)
  active                   Boolean               @default(true)
  status                   String?               @default("ACTIVE")
  deployment_env_config    deployment_env_config @relation(fields: [deployment_env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_project_deployment_info_deployment_env_config_id")
  ziroom_server            ziroom_server         @relation(fields: [ziroom_server_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "project_deployment_info_ziroom_server_id")

  @@index([ziroom_server_id], map: "idx_project_deployment_info_by_ziroom_server_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_feature {
  id           BigInt       @id @default(autoincrement())
  project_id   BigInt
  feature_id   BigInt
  feature_gate feature_gate @relation(fields: [feature_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project      project      @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([project_id, feature_id], map: "idx_project_feature_by_project_id_feature_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_has_custom_components {
  id                  BigInt           @id
  project_id          BigInt
  custom_component_id BigInt
  created_at          DateTime         @db.Timestamptz(6)
  custom_component    custom_component @relation(fields: [custom_component_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project             project          @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([custom_component_id], map: "idx_project_has_custom_components_by_custom_component_id")
  @@index([project_id], map: "idx_project_has_custom_components_by_project_id")
}

model project_module {
  id            BigInt         @id @default(autoincrement())
  project_id    BigInt
  created_at    DateTime?      @default(now()) @db.Timestamptz(6)
  module_id     BigInt?
  module_record module_record? @relation(fields: [module_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project       project        @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model project_plan_expiration_record {
  id                                        BigInt                                      @id
  project_id                                BigInt
  original_plan_type                        String
  created_at                                DateTime                                    @db.Timestamptz(6)
  updated_at                                DateTime                                    @db.Timestamptz(6)
  project_capability_downgrade_notification project_capability_downgrade_notification[]
  project                                   project                                     @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id], map: "idx_project_plan_expiration_record_by_project_id")
}

model project_plan_from_purchase {
  id                     BigInt               @id
  project_id             BigInt               @unique(map: "udx_project_plan_from_purchase_by_project_id")
  project_plan_type      String
  created_at             DateTime             @db.Timestamptz(6)
  expire_at              DateTime             @db.Timestamptz(6)
  subscription_id        BigInt?              @unique(map: "udx_project_plan_from_purchase_by_subscription_id")
  from_organization_plan Boolean?             @default(false)
  payment_id             BigInt?
  payment                payment?             @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                project              @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  stripe_subscription    stripe_subscription? @relation(fields: [subscription_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model project_reset_record {
  id            BigInt   @id
  project_id    BigInt
  account_id    BigInt
  language_type String
  status        String
  stacktrace    String?
  created_at    DateTime @db.Timestamptz(6)
  updated_at    DateTime @db.Timestamptz(6)
  account       account  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project       project  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id], map: "idx_project_reset_record_by_project_id")
}

model project_resource_consumption_record {
  id                            BigInt                          @id
  project_id                    BigInt
  resource_type                 String
  used_amount                   Float
  start_at                      DateTime                        @db.Timestamptz(6)
  end_at                        DateTime                        @db.Timestamptz(6)
  project                       project                         @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_resource_credit_usage project_resource_credit_usage[]

  @@index([project_id, resource_type, start_at], map: "idx_project_resource_consumption_by_pid_type_start_at")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_resource_credit_usage {
  id                                  BigInt                              @id
  resource_consumption_record_id      BigInt
  project_resource_source_id          BigInt?
  organization_resource_source_id     BigInt?
  amount                              Float
  organization_resource_source        organization_resource_source?       @relation(fields: [organization_resource_source_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_resource_source             project_resource_source?            @relation(fields: [project_resource_source_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_resource_consumption_record project_resource_consumption_record @relation(fields: [resource_consumption_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([organization_resource_source_id], map: "idx_project_resource_credit_usage_by_org_source_id")
  @@index([project_resource_source_id], map: "idx_project_resource_credit_usage_by_proj_source_id")
  @@index([resource_consumption_record_id], map: "idx_project_resource_credit_usage_by_record_id")
}

model project_resource_source {
  id                            BigInt                          @id
  project_id                    BigInt
  resource_type                 String
  amount                        Float
  source_detail                 Json
  start_at                      DateTime                        @db.Timestamptz(6)
  end_at                        DateTime                        @db.Timestamptz(6)
  project_resource_credit_usage project_resource_credit_usage[]
  project                       project                         @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id, resource_type, start_at], map: "idx_project_resource_source_by_pid_type_start_at")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_resource_usage {
  id                           BigInt                         @id @default(autoincrement())
  project_id                   BigInt
  resource_type                String
  used_amount                  Float
  available_amount             Float?
  calculated_at                DateTime                       @db.Timestamptz(6)
  unlimited                    Boolean
  project                      project                        @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_resource_usage_entry project_resource_usage_entry[]

  @@index([project_id, calculated_at], map: "idx_project_resource_usage_by_pid_calculated_at")
  @@index([project_id, resource_type], map: "idx_project_resource_usage_by_project_id_and_resource_type")
}

model project_resource_usage_entry {
  id                         BigInt                 @id
  project_resource_usage_id  BigInt
  source_of_project_resource Json
  provided_amount            Float
  available_amount           Float
  calculated_at              DateTime               @db.Timestamptz(6)
  project_resource_usage     project_resource_usage @relation(fields: [project_resource_usage_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_resource_usage_id], map: "idx_project_resource_usage_entry_by_usage_id")
}

model project_resource_usage_history {
  id            BigInt   @id
  project_id    BigInt
  resource_type String
  amount        Float
  period_type   String
  start_time    DateTime @db.Timestamptz(6)
  end_time      DateTime @db.Timestamptz(6)

  @@unique([project_id, resource_type, period_type, start_time], map: "udx_project_resource_usage_history_by_four_columns")
}

/// This table has subclasses and requires additional setup for migrations. Visit https://pris.ly/d/table-inheritance for more info.
/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model project_rps_exceeded_record {
  id                             BigInt           @default(autoincrement())
  project_id                     BigInt
  project_version_id             BigInt?
  date                           DateTime         @db.Date
  epoch_seconds                  Json?
  exceeded_count_by_epoch_second Json?
  created_at                     DateTime         @db.Timestamptz(6)
  project                        project          @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_version                project_version? @relation(fields: [project_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id, project_version_id, date], map: "idx_project_id_version_id_date")
  @@index([date(sort: Desc)])
  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_schema {
  id                            BigInt                        @id
  account_id                    BigInt
  project_id                    BigInt?
  data_model                    Json
  m_ref_map                     Json
  wechat_root_m_refs            Json?
  created_at                    DateTime                      @db.Timestamptz(6)
  artifacts                     Json?
  color_theme                   Json?
  app_configuration             Json
  zed_version                   String
  color_theme_label_map         Json?
  remote_api_schema             Json?
  pipeline_platforms            Json
  for_table_lock                String?
  web_root_m_refs               Json                          @default("[]")
  app_global_setting            Json?
  mobile_web_root_m_refs        Json?                         @default("[]")
  wechat_configuration          Json?
  web_configuration             Json?                         @default("{\"initialScreenMRef\": \"undefined\"}")
  mobile_web_configuration      Json?                         @default("{\"initialScreenMRef\": \"undefined\"}")
  component_templates           Json?
  action_flows                  Json?                         @default("[]")
  management_console_config     Json?
  template_id                   BigInt?
  callback_configs              Json                          @default("[]")
  third_party_api_configs       Json?                         @default("[]")
  zed_scheduled_jobs            Json?
  page_group_configuration      Json?
  module_instance_by_id         Json?                         @default("{}")
  module_container_config_by_id Json?                         @default("{}")
  imported_module_by_uuid       Json?                         @default("{}")
  role_configs                  Json?                         @default("[]")
  project_version_id            BigInt?
  z_ai_configs                  Json?                         @default("[]")
  custom_type_definitions       Json?                         @default("{}")
  type_definitions              Json?
  type_conversion_definitions   Json?
  session_id                    String?
  server_configuration          Json?
  trigger_configuration         Json?                         @default("[]")
  payment_config_record         Json?
  action_flow_entity            action_flow_entity[]
  data_visualizer_draft         data_visualizer_draft[]
  deployment_env_config         deployment_env_config[]
  deployment_event              deployment_event[]
  deployment_record             deployment_record[]
  failed_schema_migration_log   failed_schema_migration_log[]
  project_version               project_version?              @relation(fields: [project_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  relation_metadata_entity      relation_metadata_entity[]
  scheduled_job                 scheduled_job[]
  schema_crdt_model             schema_crdt_model?
  schema_crdt_patch             schema_crdt_patch[]
  schema_module_instance        schema_module_instance[]
  table_metadata_entity         table_metadata_entity[]
  trigger                       trigger[]
  web_app_deployment_record     web_app_deployment_record[]

  @@index([created_at], map: "idx_project_schema_on_created_at", type: Brin)
  @@index([project_id], map: "idx_project_schema_on_project_id")
  @@index([template_id], map: "idx_project_schema_on_template_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_template {
  id                           BigInt                         @id
  name                         String
  description                  String?
  preview_image_ids            BigInt[]
  creator_id                   BigInt
  updated_at                   DateTime?                      @db.Timestamptz(6)
  created_at                   DateTime?                      @db.Timestamptz(6)
  cover_image_id               BigInt?
  template_unique_id           String?                        @db.Uuid
  visibility                   String?
  status                       String?
  platforms                    Json?
  category                     Json?
  trial_qr_code_id             BigInt?
  documentation_link           String?
  web_trial_url                String?
  web_trial_qr_code_id         BigInt?
  price                        Decimal                        @default(0) @db.Decimal
  published_at                 DateTime?                      @db.Timestamptz(6)
  tutorial_video_url           String?
  purchasable_plan             Json?                          @default("[\"ZION_FREE\", \"MOMEN_FREE\"]")
  url_for_viewer               String?
  minimum_required_plan        String?
  promotion_type               String?                        @default("OTHERS")
  type                         String?                        @default("SINGLE_CLIENT")
  free_trial_days              Int?                           @default(0)
  allow_copy                   Boolean                        @default(false)
  account_template             account_template[]
  pre_created_project_capacity pre_created_project_capacity[]
  stored_image                 stored_image?                  @relation(fields: [web_trial_qr_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "project_template_web_trial_qc_code_id_fkey")
  project_template_commission  project_template_commission?
  project_with_template        project_with_template[]
  template_app                 template_app[]
  template_audit_record        template_audit_record[]
  template_category            template_category[]
  tutorial_template_steps      tutorial_template_steps[]

  @@index([creator_id], map: "idx_project_template_by_creator_id")
}

model project_template_commission {
  id                      BigInt                    @id
  project_template_id     BigInt                    @unique(map: "udx_project_template_commission_by_project_template_id")
  project_validity_period Json?
  commission_account_id   BigInt?
  product_commission_rule product_commission_rule[]
  account                 account?                  @relation(fields: [commission_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_template        project_template          @relation(fields: [project_template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_template_feedback {
  id              BigInt    @id
  account_id      BigInt
  created_at      DateTime? @db.Timestamptz(6)
  expect_template String?
  account         account   @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_fk_project_template_feedback_account_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_transfer {
  id                                                          BigInt   @id
  original_owner_account_id                                   BigInt
  target_account_id                                           BigInt
  project_id                                                  BigInt
  created_at                                                  DateTime @db.Timestamptz(6)
  account_project_transfer_original_owner_account_idToaccount account  @relation("project_transfer_original_owner_account_idToaccount", fields: [original_owner_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                                                     project  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account_project_transfer_target_account_idToaccount         account  @relation("project_transfer_target_account_idToaccount", fields: [target_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([original_owner_account_id], map: "idx_project_transfer_original_owner_account_id_fkey")
  @@index([project_id], map: "idx_project_transfer_project_id_fkey")
  @@index([target_account_id], map: "idx_project_transfer_target_account_id_fkey")
}

model project_version {
  id                                     BigInt                                   @id
  name                                   String?
  description                            String?
  project_id                             BigInt
  creator_account_id                     BigInt
  created_at                             DateTime?                                @db.Timestamptz(6)
  previous_version_id                    BigInt?
  version                                BigInt?
  status                                 String?
  deployment_env_config                  deployment_env_config[]
  project_config_and_version             project_config_and_version[]
  project_rps_exceeded_record            project_rps_exceeded_record[]            @ignore
  project_schema                         project_schema[]
  account                                account                                  @relation(fields: [creator_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_version                        project_version?                         @relation("project_versionToproject_version", fields: [previous_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_project_version                  project_version[]                        @relation("project_versionToproject_version")
  project                                project                                  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_version_has_app_version        project_version_has_app_version[]
  stored_file                            stored_file[]
  stored_image                           stored_image[]
  stored_video                           stored_video[]
  wechat_mini_program_config_and_version wechat_mini_program_config_and_version[]

  @@unique([project_id, name], map: "udx_project_version_project_id_and_name")
  @@index([creator_account_id], map: "idx_fk_project_version_account")
  @@index([project_id], map: "idx_fk_project_version_project")
}

model project_version_has_app_version {
  id                 BigInt          @id
  project_version_id BigInt
  type               String
  app_version_id     BigInt
  created_at         DateTime        @db.Timestamptz(6)
  project_version    project_version @relation(fields: [project_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_version_id, app_version_id], map: "udx_project_version_has_app_version_project_and_app")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model project_with_template {
  id               BigInt           @id
  project_id       BigInt
  template_id      BigInt
  created_at       DateTime?        @db.Timestamptz(6)
  project          project          @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_project_with_template_project_id_project_id")
  project_template project_template @relation(fields: [template_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_project_with_template_template_id_project_template_id")

  @@index([project_id], map: "idx_fk_project_with_template_project_id_project_id")
  @@index([template_id], map: "idx_fk_project_with_template_template_id_project_template_id")
}

model project_with_wechat_ids {
  project_id BigInt   @id
  wechat_ids Json?
  created_at DateTime @db.Timestamptz(6)
  updated_at DateTime @db.Timestamptz(6)
  project    project  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model promo_code {
  id                                                 BigInt                    @id
  code                                               String                    @unique(map: "udx_promo_code_by_code")
  description                                        String
  account_id                                         BigInt
  start_at                                           DateTime                  @db.Timestamptz(6)
  expire_at                                          DateTime                  @db.Timestamptz(6)
  commission_period_after_register                   Json?
  account_account_referrer_promo_code_idTopromo_code account[]                 @relation("account_referrer_promo_code_idTopromo_code")
  market_reward_rule                                 market_reward_rule[]
  product_commission_rule                            product_commission_rule[]
  account_promo_code_account_idToaccount             account                   @relation("promo_code_account_idToaccount", fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  promo_code_product_rule                            promo_code_product_rule[]
  purchase_order                                     purchase_order[]
}

model promo_code_product_rule {
  id                 BigInt          @id
  promo_code_id      BigInt
  commission_rule_id BigInt
  root_product_type  String
  commission_rule    commission_rule @relation(fields: [commission_rule_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  promo_code         promo_code      @relation(fields: [promo_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([promo_code_id, root_product_type], map: "udx_promo_code_product_rule_by_promo_code_product")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model purchase_order {
  id                     BigInt                  @id @default(autoincrement())
  account_id             BigInt
  purchaser_name         String
  purchaser_phone_number String
  purchaser_email        String
  status                 String
  amount                 Decimal                 @db.Decimal
  currency               String
  created_at             DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?               @default(now()) @db.Timestamptz(6)
  promo_code_id          BigInt?
  coupon_id              BigInt?
  direct_purchase        Boolean?                @default(true)
  coupon_redeemed        Boolean?
  alipay_subscription    alipay_subscription[]
  commission             commission[]
  invoice_request_order  invoice_request_order[]
  order_product          order_product[]
  payment                payment[]
  account                account                 @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account_has_coupon     account_has_coupon?     @relation(fields: [coupon_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  promo_code             promo_code?             @relation(fields: [promo_code_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([promo_code_id], map: "idx_purchase_order_by_promo_code_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This table contains exclusion constraints and requires additional setup for migrations. Visit https://pris.ly/d/exclusion-constraints for more info.
model query_content_id_mapping {
  id      BigInt @id @default(autoincrement())
  content String
}

model r {
  id  BigInt  @id
  val String?
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model r2 {
  i Unsupported("interval")?

  @@ignore
}

model redemption_code {
  id                 BigInt               @id
  code               String               @unique(map: "udx_redemption_code_by_code")
  description        String
  used_amount        BigInt
  total_amount       BigInt
  created_at         DateTime             @db.Timestamptz(6)
  market_reward_rule market_reward_rule[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model relation_metadata_entity {
  id                     BigInt         @id
  schema_id              BigInt
  relation_metadata_id   String         @db.Uuid
  name_in_source         String
  name_in_target         String
  type                   String
  source_table           String
  source_column          String
  target_table           String
  target_column          String
  created_at             DateTime?      @db.Timestamptz(6)
  display_name_in_source String
  display_name_in_target String
  project_schema         project_schema @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "relation_metadata_entity_fk_project_schema")

  @@index([schema_id], map: "idx_relation_metadata_entity_fk_project_schema")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model role {
  id              BigInt            @id
  role_name       String            @unique(map: "udx_role_by_role_name")
  parent_id       BigInt?
  account_role    account_role[]
  role            role?             @relation("roleTorole", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_role_parent_id")
  other_role      role[]            @relation("roleTorole")
  role_permission role_permission[]

  @@index([parent_id], map: "idx_role_by_parent_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model role_permission {
  id         BigInt @id
  role_id    BigInt
  permission String
  role       role   @relation(fields: [role_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_role_permission_role_id_role_id")

  @@unique([role_id, permission], map: "udx_role_permission_by_role_id_permission")
  @@index([permission], map: "idx_role_permission_by_permission")
  @@index([role_id], map: "idx_role_permission_by_role_id")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model rr1 {
  id BigInt?

  @@ignore
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model has constraints using non-default deferring rules and requires additional setup for migrations. Visit https://pris.ly/d/constraint-deferring for more info.
model scheduled_job {
  id              BigInt         @id
  schema_id       BigInt
  name            String
  job_group       String
  description     String
  durable         Boolean
  should_recover  Boolean
  job_type        String
  data_map        Json
  trigger_configs Json
  updated_at      DateTime       @default(now()) @db.Timestamptz(6)
  created_at      DateTime?      @default(now()) @db.Timestamptz(6)
  enabled         Boolean        @default(true)
  project_schema  project_schema @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_scheduled_schema_id")

  @@index([schema_id], map: "idx_fk_scheduled_schema_id")
}

model schema_crdt_model {
  id                                BigInt                          @id
  project_schema_id                 BigInt?                         @unique(map: "idx_schema_crdt_model_by_project_schema_id")
  web_app_schema_id                 BigInt?                         @unique(map: "idx_schema_crdt_model_by_web_app_schema_id")
  wechat_mini_program_app_schema_id BigInt?                         @unique(map: "idx_schema_crdt_model_by_wechat_mini_program_app_schema_id")
  model_content                     Bytes
  created_at                        DateTime                        @db.Timestamptz(6)
  continuous                        Boolean?
  project_schema                    project_schema?                 @relation(fields: [project_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app_schema                    web_app_schema?                 @relation(fields: [web_app_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  wechat_mini_program_app_schema    wechat_mini_program_app_schema? @relation(fields: [wechat_mini_program_app_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([created_at], map: "idx_schema_crdt_model_by_created_at", type: Brin)
}

model schema_crdt_patch {
  id                                BigInt                          @id
  zed_version                       String
  uuid                              String                          @unique(map: "idx_schema_crdt_patch_by_uuid") @db.Uuid
  project_schema_id                 BigInt?
  web_app_schema_id                 BigInt?
  wechat_mini_program_app_schema_id BigInt?
  session_id                        String?
  content                           Json
  content_patch                     Bytes
  author_account_id                 BigInt
  created_at                        DateTime                        @db.Timestamptz(6)
  project_schema                    project_schema?                 @relation(fields: [project_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app_schema                    web_app_schema?                 @relation(fields: [web_app_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  wechat_mini_program_app_schema    wechat_mini_program_app_schema? @relation(fields: [wechat_mini_program_app_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([created_at], map: "idx_schema_crdt_patch_by_created_at", type: Brin)
  @@index([project_schema_id], map: "idx_schema_crdt_patch_by_project_schema_id")
  @@index([web_app_schema_id], map: "idx_schema_crdt_patch_by_web_app_schema_id")
  @@index([wechat_mini_program_app_schema_id], map: "idx_schema_crdt_patch_by_wechat_mini_program_app_schema_id")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model schema_diff_xxx {
  id                BigInt?
  schema_id         BigInt?
  zed_version       String?
  uuid              String?   @db.Uuid
  seq               BigInt?
  session_id        String?
  content           Json?
  created_at        DateTime? @db.Timestamptz(6)
  author_account_id BigInt?

  @@ignore
}

model schema_module_instance {
  id                      BigInt         @id @default(autoincrement())
  schema_id               BigInt
  module_unique_id        String         @db.Uuid
  module_version_id       Int
  module_instance_id      String
  module_instance_content Json
  created_at              DateTime?      @default(now()) @db.Timestamptz(6)
  project_schema          project_schema @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([schema_id, module_instance_id], map: "udx_schema_module_instance_by_schema_id_module_instance_id")
}

model schema_synchronized_record {
  id               BigInt   @id
  feature_name     String
  schema_source_id BigInt?
  created_at       DateTime @db.Timestamptz(6)

  @@unique([schema_source_id, feature_name], map: "unique_schema_feature")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model share_token {
  id                         BigInt                   @id
  project_id                 BigInt?
  collaborator_type          String
  created_at                 DateTime                 @db.Timestamptz(6)
  expire_at                  DateTime                 @db.Timestamptz(6)
  code                       String                   @unique(map: "udx_share_token_by_code")
  permission                 Json?                    @default("{\"mcEnable\": true, \"cloneEnable\": true, \"dataAnalysisEnable\": true}")
  web_app_id                 BigInt?
  wechat_mini_program_app_id BigInt?
  used_count                 Int                      @default(0)
  usage_limit                Int                      @default(2147483647)
  creator_account_id         BigInt?
  data_visualizer_id         BigInt?
  account                    account?                 @relation(fields: [creator_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  data_visualizer            data_visualizer?         @relation(fields: [data_visualizer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app                    web_app?                 @relation(fields: [web_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  wechat_mini_program_app    wechat_mini_program_app? @relation(fields: [wechat_mini_program_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model spatial_ref_sys {
  srid      Int     @id
  auth_name String? @db.VarChar(256)
  auth_srid Int?
  srtext    String? @db.VarChar(2048)
  proj4text String? @db.VarChar(2048)
}

model stored_file {
  id                 BigInt           @id
  file_key           String
  created_at         DateTime?        @db.Timestamptz(6)
  project_id         BigInt
  name               String?          @default("UNKNOWN")
  suffix             String?          @default("UNKNOWN")
  size_bytes         Int?             @default(0)
  project_version_id BigInt?
  project_version    project_version? @relation(fields: [project_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model stored_image {
  id                      BigInt                    @id
  image_key               String
  created_at              DateTime?                 @db.Timestamptz(6)
  project_id              BigInt
  project_version_id      BigInt?
  custom_component_items  custom_component_items[]
  editor_component        editor_component[]
  educational_institution educational_institution[]
  message_content         message_content[]
  project_template        project_template[]
  project_version         project_version?          @relation(fields: [project_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model stored_video {
  id                 BigInt            @id
  video_key          String
  created_at         DateTime?         @db.Timestamptz(6)
  project_id         BigInt
  project_version_id BigInt?
  message_content    message_content[]
  project_version    project_version?  @relation(fields: [project_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model stripe_account {
  id                BigInt  @id
  stripe_account_id String
  account_id        BigInt
  account           account @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model stripe_customer_info {
  id                 BigInt   @id @default(autoincrement())
  stripe_customer_id String   @unique(map: "udx_stripe_customer_info_by_stripe_customer_id")
  account_id         BigInt   @unique(map: "udx_stripe_customer_info_by_account_id")
  created_at         DateTime @db.Timestamptz(6)
  account            account  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "stripe_customer_fk_account_id")
}

model stripe_event {
  id           BigInt   @id @default(autoincrement())
  stripe_event Json
  created_at   DateTime @db.Timestamptz(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model stripe_invoice {
  id                BigInt   @id @default(autoincrement())
  invoice_status    String
  payment_intent_id String   @unique(map: "udx_stripe_invoice_by_payment_intent_id")
  subscription_id   BigInt
  stripe_invoice_id String   @unique(map: "udx_stripe_invoice_by_stripe_invoice_id")
  created_at        DateTime @db.Timestamptz(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model stripe_payment_info {
  id                       BigInt  @id
  payment_id               BigInt  @unique(map: "udx_stripe_payment_info_by_payment_id")
  payment_method_type      String
  stripe_payment_intent_id String? @unique(map: "udx_stripe_payment_info_by_stripe_payment_intent_id")
  subscription_id          BigInt?
  stripe_setup_intent_id   String?
  payment                  payment @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "stripe_payment_info_fk_payment_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model stripe_product_info {
  id                BigInt @id @default(autoincrement())
  product_id        BigInt @unique(map: "udx_stripe_product_info_by_product_id")
  stripe_price_id   String @unique(map: "udx_stripe_product_info_by_stripe_price_id")
  stripe_product_id String @default("")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model stripe_session {
  id                BigInt   @id
  project_id        BigInt?
  stripe_session_id String
  product_id        BigInt
  created_at        DateTime @db.Timestamptz(6)
  first_order_id    BigInt?
  project           project? @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([product_id], map: "idx_stripe_session_by_product_id")
  @@index([project_id], map: "idx_stripe_session_by_project_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model stripe_subscription {
  id                         BigInt                      @id @default(autoincrement())
  stripe_subscription_id     String                      @unique(map: "udx_stripe_subscription_by_stripe_subscription_id")
  customer_id                String
  current_period_start       DateTime                    @db.Timestamptz(6)
  current_period_end         DateTime                    @db.Timestamptz(6)
  subscription_status        String
  latest_invoice             String
  created_at                 DateTime                    @db.Timestamptz(6)
  scheduled_cancel_at        DateTime?                   @db.Timestamptz(6)
  project_plan_from_purchase project_plan_from_purchase?
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model stripe_transfer {
  id                       BigInt                     @id
  transfer_amount          Decimal                    @db.Decimal
  type                     String
  status                   String
  created_at               DateTime                   @db.Timestamptz(6)
  updated_at               DateTime                   @db.Timestamptz(6)
  stripe_transfer_id       String
  stripe_account_id        String
  details                  Json?
  stripe_transfer_reversal stripe_transfer_reversal[]
}

model stripe_transfer_info {
  id                 BigInt     @id
  payment_id         BigInt
  commission_id      BigInt
  transfer_amount    Decimal    @db.Decimal
  stripe_account_id  String
  stripe_transfer_id String?
  status             String
  error_message      String?
  created_at         DateTime   @db.Timestamptz(6)
  updated_at         DateTime   @db.Timestamptz(6)
  commission         commission @relation(fields: [commission_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment            payment    @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([commission_id, payment_id], map: "idx_stripe_transfer_info_by_commission_payment")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model stripe_transfer_reversal {
  id                          BigInt          @id
  transfer_amount             Decimal         @db.Decimal
  type                        String
  status                      String
  created_at                  DateTime        @db.Timestamptz(6)
  updated_at                  DateTime        @db.Timestamptz(6)
  stripe_transfer_id          BigInt
  stripe_transfer_reversal_id String
  details                     Json?
  stripe_transfer             stripe_transfer @relation(fields: [stripe_transfer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model subscriber {
  id         BigInt   @id @default(autoincrement())
  created_at DateTime @db.Timestamptz(6)
  email      String   @unique(map: "udx_subscriber_by_email")
}

model synchronization_data_error_log {
  id                       BigInt                @id
  project_id               BigInt
  deployment_env_config_id BigInt
  status                   String
  errors                   Json
  created_at               DateTime?             @db.Timestamptz(6)
  deployment_record_id     BigInt?
  deployment_env_config    deployment_env_config @relation(fields: [deployment_env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  deployment_record        deployment_record?    @relation(fields: [deployment_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project                  project               @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([created_at], map: "sync_data_error_log_created_at", type: Brin)
  @@index([deployment_record_id], map: "sync_data_error_log_deployment_record_id")
  @@index([deployment_env_config_id], map: "sync_data_error_log_env_config_id")
  @@index([project_id], map: "sync_data_error_log_project_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model table_metadata_entity {
  id                      BigInt         @id
  schema_id               BigInt
  table_name              String
  display_name            String?
  description             String?
  created_at              DateTime?      @db.Timestamptz(6)
  api_definitions         Json?
  readonly                Boolean?
  is_view                 Boolean?
  constraint_metadata     Json           @default("[]")
  writable_for_admin_only Boolean?
  schema_modifiable       Boolean        @default(true)
  hidden_in_zed           Boolean        @default(false)
  table_metadata_id       String         @db.Uuid
  extensions              Json?
  project_schema          project_schema @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "table_metadata_entity_fk_project_schema")

  @@index([schema_id], map: "idx_table_metadata_entity_fk_project_schema")
}

model tasks {
  id   Int    @id @default(autoincrement())
  name String
}

model temp_deleted_data {
  id   BigInt @id @default(autoincrement())
  data Json?
}

model template_app {
  id                             BigInt                           @id
  name                           String
  template_id                    BigInt
  created_at                     DateTime                         @db.Timestamptz(6)
  updated_at                     DateTime                         @db.Timestamptz(6)
  app_type                       String
  active                         Boolean
  project_template               project_template                 @relation(fields: [template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app_schema                 web_app_schema[]
  wechat_mini_program_app_schema wechat_mini_program_app_schema[]
}

model template_audit_record {
  id               BigInt           @id @default(autoincrement())
  template_id      BigInt
  audit_account_id BigInt
  audit_status     String
  reject_reason    String?
  created_at       DateTime?        @default(now()) @db.Timestamptz(6)
  account          account          @relation(fields: [audit_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_template project_template @relation(fields: [template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([audit_account_id], map: "idx_template_audit_record_by_audit_account_id")
  @@index([template_id], map: "idx_template_audit_record_by_template_id")
}

model template_category {
  id               BigInt            @id @default(autoincrement())
  template_id      BigInt?
  category_id      BigInt?
  category         category?         @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_template project_template? @relation(fields: [template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([template_id, category_id], map: "udx_template_category_by_template_id_category_id")
  @@index([category_id], map: "idx_template_category_by_category_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model template_step_and_account {
  id                      BigInt                  @id
  step_id                 BigInt
  account_id              BigInt
  created_at              DateTime                @db.Timestamptz(6)
  updated_at              DateTime?               @db.Timestamptz(6)
  completed               Boolean?
  account                 account                 @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  tutorial_template_steps tutorial_template_steps @relation(fields: [step_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([account_id], map: "idx_template_step_and_account_by_account_id")
  @@index([step_id], map: "idx_template_step_and_account_by_step_id")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model test_cicd {
  content String

  @@ignore
}

model token_synchronize_failure {
  id                       BigInt   @id
  deployment_env_config_id BigInt
  error_log                String
  created_at               DateTime @db.Timestamptz(6)
}

model trigger {
  id             BigInt         @id
  schema_id      BigInt
  type           String
  unique_id      String         @db.Uuid
  config         Json
  enabled        Boolean
  created_at     DateTime       @db.Timestamptz(6)
  updated_at     DateTime       @db.Timestamptz(6)
  project_schema project_schema @relation(fields: [schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([schema_id], map: "idx_trigger_by_schema_id")
}

model trigger_zvm_generator_record {
  id                    BigInt                @id
  deploy_record_id      BigInt
  app_id                BigInt?
  project_id            BigInt
  deploy_env_config_id  BigInt
  build_target          String
  status                String
  scheduled             Boolean               @default(false)
  total_page_num        BigInt
  ssg_upload_dir        String?
  created_at            DateTime              @db.Timestamptz(6)
  updated_at            DateTime              @db.Timestamptz(6)
  error_detail          Json?                 @default("{}")
  failed_page_by_url    Json?                 @default("[]")
  deployment_env_config deployment_env_config @relation(fields: [deploy_env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project               project               @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id, app_id], map: "idx_trigger_zvm_generator_record_by_project_id_and_app_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model tutorial_template_steps {
  id                        BigInt                      @id
  template_id               BigInt
  sequence_id               BigInt
  step_name                 String
  created_at                DateTime                    @db.Timestamptz(6)
  updated_at                DateTime?                   @db.Timestamptz(6)
  chapter                   String
  chapter_sequence          BigInt
  template_step_and_account template_step_and_account[]
  project_template          project_template            @relation(fields: [template_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([template_id], map: "idx_tutorial_template_steps_by_template_id")
}

model user_choice {
  id                                                                       BigInt                 @id @default(autoincrement())
  chinese_text                                                             String
  question_id                                                              BigInt
  english_text                                                             String
  icon                                                                     String?
  next_question_id                                                         BigInt?
  tip_content                                                              Json?
  next_fill_in_blank_id                                                    BigInt?
  user_fill_in_blank_user_choice_next_fill_in_blank_idTouser_fill_in_blank user_fill_in_blank?    @relation("user_choice_next_fill_in_blank_idTouser_fill_in_blank", fields: [next_fill_in_blank_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_question                                                            user_question          @relation(fields: [question_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_fill_in_blank_user_fill_in_blank_choice_idTouser_choice             user_fill_in_blank?    @relation("user_fill_in_blank_choice_idTouser_choice")
  user_question_answer                                                     user_question_answer[]
}

model user_fill_in_blank {
  id                                                                BigInt          @id
  chinese_placeholder                                               String?
  english_placeholder                                               String?
  question_id                                                       BigInt?         @unique(map: "udx_user_fill_in_blank_by_question_id")
  choice_id                                                         BigInt?         @unique(map: "udx_user_fill_in_blank_by_choice_id")
  user_choice_user_choice_next_fill_in_blank_idTouser_fill_in_blank user_choice[]   @relation("user_choice_next_fill_in_blank_idTouser_fill_in_blank")
  user_choice_user_fill_in_blank_choice_idTouser_choice             user_choice?    @relation("user_fill_in_blank_choice_idTouser_choice", fields: [choice_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_question_user_fill_in_blank_question_idTouser_question       user_question?  @relation("user_fill_in_blank_question_idTouser_question", fields: [question_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_question_user_question_fill_in_blank_idTouser_fill_in_blank  user_question[] @relation("user_question_fill_in_blank_idTouser_fill_in_blank")
}

model user_question {
  id                                                                    BigInt                 @id @default(autoincrement())
  chinese_text                                                          String
  english_text                                                          String
  version                                                               String                 @default("V1")
  type                                                                  String                 @default("SINGLE_CHOICE")
  tip_content                                                           Json?
  product_type                                                          String                 @default("ZION")
  placeholder_i18n_key                                                  String?
  required                                                              Boolean                @default(true)
  fill_in_blank_id                                                      BigInt?
  user_choice                                                           user_choice[]
  user_fill_in_blank_user_fill_in_blank_question_idTouser_question      user_fill_in_blank?    @relation("user_fill_in_blank_question_idTouser_question")
  user_fill_in_blank_user_question_fill_in_blank_idTouser_fill_in_blank user_fill_in_blank?    @relation("user_question_fill_in_blank_idTouser_fill_in_blank", fields: [fill_in_blank_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_question_answer                                                  user_question_answer[]
}

model user_question_answer {
  id            BigInt        @id @default(autoincrement())
  account_id    BigInt
  question_id   BigInt
  answer_id     BigInt?
  created_at    DateTime?     @default(now()) @db.Timestamptz(6)
  answer        Json?
  account       account       @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_choice   user_choice?  @relation(fields: [answer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_question user_question @relation(fields: [question_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([account_id, question_id], map: "udx_user_question_answer_by_account_and_answer")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model user_tutorial_preference {
  id            BigInt    @id
  functionality String
  show_tutorial Boolean
  account_id    BigInt?
  created_at    DateTime  @db.Timestamptz(6)
  updated_at    DateTime? @db.Timestamptz(6)
  account       account?  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([account_id, functionality], map: "udx_user_tutorial_preference_by_functionality_account_id")
  @@index([account_id], map: "idx_user_tutorial_preference_by_account_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model verification_code {
  id            BigInt   @id
  code          String?
  consumed_code String?
  account_id    BigInt?
  sent_to       String?
  method        String?
  type          String?
  expire_at     DateTime @db.Timestamptz(6)
  created_at    DateTime @db.Timestamptz(6)
  updated_at    DateTime @db.Timestamptz(6)
  account       account? @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_verification_code_account_id")

  @@index([account_id], map: "idx_fk_verification_code_account_id")
  @@index([code], map: "idx_verification_code_by_code")
  @@index([sent_to], map: "idx_verification_code_by_sent_to")
}

model web_app {
  id                        BigInt                      @id
  name                      String
  project_id                BigInt
  purchaser_account_id      BigInt
  status                    String
  config                    Json
  created_at                DateTime?                   @db.Timestamptz(6)
  updated_at                DateTime?                   @db.Timestamptz(6)
  web_beta_domain           String?
  web_domain                String?
  expire_at                 DateTime?                   @db.Timestamptz(6)
  addon_app                 Boolean?
  additional                Boolean                     @default(false)
  account_read_app          account_read_app[]
  share_token               share_token[]
  account                   account                     @relation(fields: [purchaser_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "web_app_creator_account_id_fkey")
  project                   project                     @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app_account           web_app_account[]
  web_app_deployment_event  web_app_deployment_event[]
  web_app_deployment_output web_app_deployment_output[]
  web_app_deployment_record web_app_deployment_record[]
  web_app_schema            web_app_schema[]
  web_app_version           web_app_version[]

  @@index([purchaser_account_id], map: "idx_fk_web_app_account")
  @@index([project_id], map: "idx_fk_web_app_project")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model web_app_account {
  id                BigInt   @id
  web_app_id        BigInt
  account_id        BigInt
  collaborator_type String
  permission        Json     @default("{\"mcEnable\": true, \"cloneEnable\": true, \"dataAnalysisEnable\": true}")
  created_at        DateTime @default(now()) @db.Timestamptz(6)
  updated_at        DateTime @default(now()) @db.Timestamptz(6)
  account           account  @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app           web_app  @relation(fields: [web_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([web_app_id, account_id], map: "udx_web_app_account_by_web_app_id_account_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model web_app_deployment_event {
  id                           BigInt                     @id
  web_app_id                   BigInt
  web_schema_id                BigInt
  status                       String
  created_at                   DateTime                   @db.Timestamptz(6)
  updated_at                   DateTime                   @db.Timestamptz(6)
  details                      Json?
  web_app_deployment_record_id BigInt?
  web_app_deployment_record    web_app_deployment_record? @relation(fields: [web_app_deployment_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app                      web_app                    @relation(fields: [web_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app_schema               web_app_schema             @relation(fields: [web_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([web_app_deployment_record_id], map: "idx_web_app_deployment_event_by_web_app_deployment_record_id")
  @@index([web_app_id], map: "idx_web_app_deployment_event_by_web_app_id")
  @@index([web_schema_id], map: "idx_web_app_deployment_event_by_web_schema_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model web_app_deployment_output {
  id                           BigInt                     @id
  web_app_id                   BigInt
  web_schema_id                BigInt
  status                       String
  created_at                   DateTime                   @db.Timestamptz(6)
  deployment_error_type        String?
  log                          String?
  web_app_deployment_record_id BigInt?
  web_app_deployment_record    web_app_deployment_record? @relation(fields: [web_app_deployment_record_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app                      web_app                    @relation(fields: [web_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app_schema               web_app_schema             @relation(fields: [web_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([web_app_deployment_record_id], map: "idx_web_app_deployment_output_by_web_app_deployment_record_id")
  @@index([web_app_id], map: "idx_web_app_deployment_output_by_web_app_id")
  @@index([web_schema_id], map: "idx_web_app_deployment_output_by_web_schema_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model web_app_deployment_record {
  id                        BigInt                      @id
  web_app_id                BigInt
  web_schema_id             BigInt
  triggered_by_account_id   BigInt
  project_schema_id         BigInt
  web_app_config            Json?
  artifacts                 Json
  status                    String
  created_at                DateTime                    @db.Timestamptz(6)
  updated_at                DateTime?                   @db.Timestamptz(6)
  web_path_by_file_name     Json
  build_target              String
  web_app_deployment_event  web_app_deployment_event[]
  web_app_deployment_output web_app_deployment_output[]
  project_schema            project_schema              @relation(fields: [project_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app                   web_app                     @relation(fields: [web_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app_schema            web_app_schema              @relation(fields: [web_schema_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_schema_id], map: "idx_web_app_deployment_record_by_project_schema_id")
  @@index([web_app_id], map: "idx_web_app_deployment_record_by_web_app_id")
  @@index([web_schema_id], map: "idx_web_app_deployment_record_by_web_schema_id")
}

model web_app_schema {
  id                            BigInt                      @id
  app_id                        BigInt?
  creator_account_id            BigInt
  m_ref_map                     Json
  root_m_refs                   Json
  color_theme                   Json?
  color_theme_label_map         Json?
  web_configuration             Json?
  module_instance_by_id         Json?
  module_container_config_by_id Json?
  imported_module_by_uuid       Json?
  zed_version                   String?
  created_at                    DateTime?                   @db.Timestamptz(6)
  app_version_id                BigInt?
  session_id                    String?
  template_app_id               BigInt?
  schema_crdt_model             schema_crdt_model?
  schema_crdt_patch             schema_crdt_patch[]
  web_app_deployment_event      web_app_deployment_event[]
  web_app_deployment_output     web_app_deployment_output[]
  web_app_deployment_record     web_app_deployment_record[]
  web_app                       web_app?                    @relation(fields: [app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_app_version               web_app_version?            @relation(fields: [app_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account                       account                     @relation(fields: [creator_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  template_app                  template_app?               @relation(fields: [template_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([creator_account_id], map: "idx_fk_web_app_schema_account")
  @@index([app_id], map: "idx_fk_web_app_schema_web_app")
}

model web_app_version {
  id                     BigInt                   @id
  name                   String
  description            String?
  app_id                 BigInt
  creator_account_id     BigInt
  created_at             DateTime                 @db.Timestamptz(6)
  web_app_schema         web_app_schema[]
  web_app                web_app                  @relation(fields: [app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account                account                  @relation(fields: [creator_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  web_config_and_version web_config_and_version[]

  @@unique([app_id, name], map: "udx_web_app_version_app_id_and_name")
  @@index([creator_account_id], map: "idx_fk_web_app_version_account")
  @@index([app_id], map: "idx_fk_web_app_version_web_app")
}

model web_config_and_version {
  id                 BigInt          @id
  web_config         Json
  web_app_version_id BigInt
  created_at         DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?       @default(now()) @db.Timestamptz(6)
  web_app_version    web_app_version @relation(fields: [web_app_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([web_app_version_id], map: "idx_web_config_and_version_by_web_app_version_id")
}

model wechat_auto_reply {
  id                             BigInt                           @id
  name                           String
  created_at                     DateTime                         @db.Timestamptz(6)
  updated_at                     DateTime                         @db.Timestamptz(6)
  wechat_auto_reply_content      wechat_auto_reply_content[]
  wechat_auto_reply_event_rule   wechat_auto_reply_event_rule[]
  wechat_auto_reply_message_rule wechat_auto_reply_message_rule[]
}

model wechat_auto_reply_content {
  id                BigInt            @id
  reply_id          BigInt
  detail            Json
  created_at        DateTime          @db.Timestamptz(6)
  updated_at        DateTime          @db.Timestamptz(6)
  wechat_auto_reply wechat_auto_reply @relation(fields: [reply_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([reply_id], map: "idx_wechat_auto_reply_content_reply_id")
}

model wechat_auto_reply_event_rule {
  id                BigInt            @id
  reply_id          BigInt
  event_type        String            @unique(map: "uq_wechat_auto_reply_event_rule_event_type")
  created_at        DateTime          @db.Timestamptz(6)
  updated_at        DateTime          @db.Timestamptz(6)
  wechat_auto_reply wechat_auto_reply @relation(fields: [reply_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model wechat_auto_reply_message_keyword {
  id                             BigInt                         @id
  rule_id                        BigInt
  keyword                        String
  match_type                     String
  created_at                     DateTime                       @db.Timestamptz(6)
  updated_at                     DateTime                       @db.Timestamptz(6)
  wechat_auto_reply_message_rule wechat_auto_reply_message_rule @relation(fields: [rule_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([keyword], map: "idx_wechat_auto_reply_message_keyword_keyword")
  @@index([rule_id], map: "idx_wechat_auto_reply_message_keyword_rule_id")
}

model wechat_auto_reply_message_rule {
  id                                BigInt                              @id
  reply_id                          BigInt
  name                              String
  fallback                          Boolean                             @default(false)
  created_at                        DateTime                            @db.Timestamptz(6)
  updated_at                        DateTime                            @db.Timestamptz(6)
  wechat_auto_reply_message_keyword wechat_auto_reply_message_keyword[]
  wechat_auto_reply                 wechat_auto_reply                   @relation(fields: [reply_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model wechat_mini_program_app {
  id                              BigInt                            @id
  name                            String
  project_id                      BigInt
  purchaser_account_id            BigInt
  config                          Json?
  status                          String
  updated_at                      DateTime?                         @db.Timestamptz(6)
  created_at                      DateTime?                         @db.Timestamptz(6)
  account_read_app                account_read_app[]
  share_token                     share_token[]
  account                         account                           @relation(fields: [purchaser_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "wechat_mini_program_app_creator_account_id_fkey")
  project                         project                           @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  wechat_mini_program_app_account wechat_mini_program_app_account[]
  wechat_mini_program_app_schema  wechat_mini_program_app_schema[]
  wechat_mini_program_app_version wechat_mini_program_app_version[]

  @@index([purchaser_account_id], map: "idx_fk_wechat_mini_program_app_account")
  @@index([project_id], map: "idx_fk_wechat_mini_program_app_project")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wechat_mini_program_app_account {
  id                         BigInt                  @id
  wechat_mini_program_app_id BigInt
  account_id                 BigInt
  collaborator_type          String
  permission                 Json                    @default("{\"mcEnable\": true, \"cloneEnable\": true, \"dataAnalysisEnable\": true}")
  created_at                 DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                 DateTime                @default(now()) @db.Timestamptz(6)
  account                    account                 @relation(fields: [account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  wechat_mini_program_app    wechat_mini_program_app @relation(fields: [wechat_mini_program_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([wechat_mini_program_app_id, account_id], map: "udx_wechat_app_account_by_wechat_app_id_account_id")
}

model wechat_mini_program_app_deployment_event {
  id                   BigInt   @id
  deployment_record_id BigInt
  status               String
  details              Json?
  created_at           DateTime @db.Timestamptz(6)
  updated_at           DateTime @db.Timestamptz(6)

  @@index([created_at], map: "idx_wechat_deployment_event_by_created_at", type: Brin)
  @@index([deployment_record_id], map: "idx_wechat_deployment_event_by_record_id")
}

model wechat_mini_program_app_deployment_output {
  id                    BigInt   @id
  deployment_record_id  BigInt
  status                String
  log                   String?
  deployment_error_type String?
  created_at            DateTime @db.Timestamptz(6)
  updated_at            DateTime @db.Timestamptz(6)

  @@index([created_at], map: "idx_wechat_deployment_output_by_created_at", type: Brin)
  @@index([deployment_record_id], map: "idx_wechat_deployment_output_by_record_id")
}

model wechat_mini_program_app_deployment_record {
  id                                BigInt   @id
  triggered_by_account_id           BigInt
  wechat_mini_program_app_id        BigInt
  wechat_mini_program_app_schema_id BigInt
  deployment_env_config_id          BigInt
  artifacts                         Json     @default("{}")
  status                            String
  created_at                        DateTime @db.Timestamptz(6)
  updated_at                        DateTime @db.Timestamptz(6)
  project_id                        BigInt
  project_schema_id                 BigInt

  @@index([triggered_by_account_id], map: "idx_wechat_deployment_record_by_account_id")
  @@index([created_at], map: "idx_wechat_deployment_record_by_created_at", type: Brin)
  @@index([deployment_env_config_id], map: "idx_wechat_deployment_record_by_deployment_env_config_id")
  @@index([project_id], map: "idx_wechat_deployment_record_by_project_id")
  @@index([project_schema_id], map: "idx_wechat_deployment_record_by_project_schema_id")
  @@index([wechat_mini_program_app_id], map: "idx_wechat_deployment_record_by_wechat_mini_program_app_id")
  @@index([wechat_mini_program_app_schema_id], map: "idx_wechat_deployment_record_by_wechat_schema_id")
}

model wechat_mini_program_app_schema {
  id                              BigInt                           @id
  app_id                          BigInt?
  creator_account_id              BigInt
  m_ref_map                       Json
  root_m_refs                     Json
  color_theme                     Json?
  color_theme_label_map           Json?
  wechat_configuration            Json?
  zed_version                     String?
  created_at                      DateTime?                        @db.Timestamptz(6)
  app_version_id                  BigInt?
  session_id                      String?
  template_app_id                 BigInt?
  schema_crdt_model               schema_crdt_model?
  schema_crdt_patch               schema_crdt_patch[]
  wechat_mini_program_app         wechat_mini_program_app?         @relation(fields: [app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  wechat_mini_program_app_version wechat_mini_program_app_version? @relation(fields: [app_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account                         account                          @relation(fields: [creator_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  template_app                    template_app?                    @relation(fields: [template_app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([creator_account_id], map: "idx_fk_wechat_mini_program_app_schema_account")
  @@index([app_id], map: "idx_fk_wechat_mini_program_app_schema_wechat_mini_program_app")
}

model wechat_mini_program_app_version {
  id                             BigInt                           @id
  name                           String
  description                    String?
  app_id                         BigInt
  creator_account_id             BigInt
  created_at                     DateTime                         @db.Timestamptz(6)
  wechat_mini_program_app_schema wechat_mini_program_app_schema[]
  wechat_mini_program_app        wechat_mini_program_app          @relation(fields: [app_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  account                        account                          @relation(fields: [creator_account_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([app_id, name], map: "udx_wechat_mini_program_app_app_id_and_name")
  @@index([creator_account_id], map: "idx_fk_wechat_mini_program_app_version_account")
  @@index([app_id], map: "idx_fk_wechat_mini_program_app_version_app")
}

model wechat_mini_program_config_and_version {
  id                                 BigInt          @id
  wechat_app_config                  Json
  wechat_mini_program_app_version_id BigInt
  created_at                         DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at                         DateTime?       @default(now()) @db.Timestamptz(6)
  project_version                    project_version @relation(fields: [wechat_mini_program_app_version_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "wechat_mini_program_config_an_wechat_mini_program_app_vers_fkey")

  @@index([wechat_mini_program_app_version_id], map: "idx_wechat_config_and_version_by_wechat_mini_program_app_versio")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wechat_miniprogram_audit {
  id                                  BigInt    @id
  project_id                          BigInt?
  audit_id                            String?
  status                              String?
  published                           Boolean?  @default(false)
  created_at                          DateTime? @db.Timestamptz(6)
  updated_at                          DateTime? @db.Timestamptz(6)
  schema_id                           BigInt
  app_id                              String?
  wechat_mini_program_admin_wechat_id String?
  feedback_info                       String?
  is_for_test_only                    Boolean   @default(false)
  media_info                          Json?     @default("[]")
  preview_version                     String?
  preview_time                        DateTime? @db.Timestamptz(6)
  deleted                             Boolean   @default(false)
  published_error_info                Json?
  published_at                        DateTime? @db.Timestamptz(6)
  title                               String?
  audit_reject_reason                 String?

  @@unique([project_id, audit_id], map: "udx_wechat_miniprogram_audit_by_project_id_audit_id")
  @@index([project_id, status, published], map: "idx_wechat_miniprogram_audit_by_project_id_status_publish")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wechat_miniprogram_auth_record {
  id                                                 BigInt   @id
  project_id                                         BigInt
  wechat_miniprogram_name                            String?
  published_wechat_miniprogram_auth_binding_info     Json?    @default("[]")
  non_published_wechat_miniprogram_auth_binding_info Json?    @default("[]")
  error_message                                      String?
  status                                             String
  created_at                                         DateTime @db.Timestamptz(6)
  updated_at                                         DateTime @db.Timestamptz(6)
  log                                                String?
  project                                            project  @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([project_id], map: "idx_wechat_miniprogram_auth_record_by_project_id")
}

model wechat_qr_auth_attempt {
  id                 BigInt   @id
  status             String
  auth_action_type   String
  ticket             String   @unique(map: "udx_wechat_qr_auth_attempt_by_ticket")
  source_channel     String?
  utm_param          Json?
  account_id_to_bind BigInt?
  account_info       Json?
  error_message      String?
  created_at         DateTime @db.Timestamptz(6)
  updated_at         DateTime @db.Timestamptz(6)
  expire_at          DateTime @db.Timestamptz(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wechat_qr_code_route_entity {
  id               BigInt    @id
  project_id       BigInt?
  prefix           String?
  exclusive_prefix String?
  path             String?
  route_range      String?
  debug_urls       Json?
  state            String?
  created_at       DateTime? @db.Timestamptz(6)
  updated_at       DateTime? @db.Timestamptz(6)
  project          project?  @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_wechat_qr_code_route_project_id")

  @@index([project_id], map: "idx_wechat_qr_code_route_entity_by_project_id")
}

model wechat_template_app {
  id                                   BigInt    @id
  app_id                               String
  locked_by_deployment_env_config_id   BigInt?
  locked_until                         DateTime? @db.Timestamptz(6)
  private_key                          String?
  updated_at                           DateTime? @db.Timestamptz(6)
  locked_by_wechat_mini_program_app_id BigInt?
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model wechat_template_list_record {
  id         BigInt   @id
  target_id  BigInt
  version    String
  created_at DateTime @db.Timestamptz(6)

  @@index([target_id], map: "idx_wechat_template_list_record_by_project_id")
}

model wxwork_corp_info {
  id             BigInt    @id
  corp_id        String    @unique
  corp_name      String?
  permanent_code String
  agent_id       Int
  created_at     DateTime  @db.Timestamptz(6)
  updated_at     DateTime? @db.Timestamptz(6)

  @@index([corp_id], map: "idx_wxwork_corp_info_by_corp_id")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model xkj {
  id BigInt?

  @@ignore
}

model xkj_test {
  id         Int       @id @default(autoincrement())
  name       String?   @db.VarChar(50)
  updated_at DateTime? @db.Timestamptz(6)
}

model ziroom_project_activation_record {
  id                       BigInt                @id
  deployment_env_config_id BigInt
  from_ziroom_id           BigInt
  to_ziroom_id             BigInt
  created_at               DateTime              @db.Timestamptz(6)
  status                   String
  stacktrace               String?
  deployment_env_config    deployment_env_config @relation(fields: [deployment_env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([deployment_env_config_id], map: "idx_ziroom_project_activation_record_deployment_env_config_id")
}

model ziroom_project_hibernation_record {
  id                       BigInt                @id
  deployment_env_config_id BigInt
  created_at               DateTime              @db.Timestamptz(6)
  status                   String
  stacktrace               String?
  last_deployment_status   String
  deployment_env_config    deployment_env_config @relation(fields: [deployment_env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([deployment_env_config_id], map: "idx_ziroom_project_hibernation_record_deployment_env_config_id")
}

model ziroom_project_migration_appointment {
  id               BigInt   @id
  project_id       BigInt
  appointment_time DateTime @db.Timestamptz(6)
  status           String
  created_at       DateTime @db.Timestamptz(6)
  updated_at       DateTime @db.Timestamptz(6)
  project          project  @relation(fields: [project_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([project_id, appointment_time], map: "idx_migration_appointment_by_project_id_appointment_time")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ziroom_project_migration_record {
  id                      BigInt                @id
  env_config_id           BigInt
  status                  String
  created_at              DateTime?             @db.Timestamptz(6)
  updated_at              DateTime?             @db.Timestamptz(6)
  from_ziroom_server_info Json
  to_ziroom_server_info   Json
  migrate_reason          String
  deployment_env_config   deployment_env_config @relation(fields: [env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([env_config_id], map: "idx_fk_ziroom_project_migration_record_env_config_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ziroom_project_transfer_record {
  id                                                                         BigInt                @id
  env_config_id                                                              BigInt
  from_server_id                                                             BigInt
  to_server_id                                                               BigInt
  status                                                                     String
  migrate_reason                                                             String
  created_at                                                                 DateTime?             @db.Timestamptz(6)
  updated_at                                                                 DateTime?             @db.Timestamptz(6)
  deployment_env_config                                                      deployment_env_config @relation(fields: [env_config_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  ziroom_server_ziroom_project_transfer_record_from_server_idToziroom_server ziroom_server         @relation("ziroom_project_transfer_record_from_server_idToziroom_server", fields: [from_server_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  ziroom_server_ziroom_project_transfer_record_to_server_idToziroom_server   ziroom_server         @relation("ziroom_project_transfer_record_to_server_idToziroom_server", fields: [to_server_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([env_config_id], map: "idx_fk_ziroom_project_transfer_record_env_config_id")
  @@index([from_server_id], map: "idx_fk_ziroom_project_transfer_record_from_server_id")
  @@index([to_server_id], map: "idx_fk_ziroom_project_transfer_record_to_server_id")
}

model ziroom_server {
  id                                                                                          BigInt                           @id
  num_slots                                                                                   Int                              @default(400)
  updated_at                                                                                  DateTime                         @db.Timestamptz(6)
  created_at                                                                                  DateTime                         @db.Timestamptz(6)
  resource_quota                                                                              Json
  cloud_configuration_id                                                                      BigInt
  db_config                                                                                   Json
  redis_config                                                                                Json
  image_version                                                                               String
  access_secret                                                                               String
  zvm_image_version                                                                           String?                          @default("master-d3547f1c")
  ziroom_server_status                                                                        String?                          @default("CREATED")
  type                                                                                        String?                          @default("FREE")
  log_db_config                                                                               Json?
  organization_has_ziroom                                                                     organization_has_ziroom[]
  project_deployment_info                                                                     project_deployment_info[]
  ziroom_project_transfer_record_ziroom_project_transfer_record_from_server_idToziroom_server ziroom_project_transfer_record[] @relation("ziroom_project_transfer_record_from_server_idToziroom_server")
  ziroom_project_transfer_record_ziroom_project_transfer_record_to_server_idToziroom_server   ziroom_project_transfer_record[] @relation("ziroom_project_transfer_record_to_server_idToziroom_server")
  cloud_configuration                                                                         cloud_configuration              @relation(fields: [cloud_configuration_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fz_ziroom_server_cloud_configuration")

  @@index([cloud_configuration_id], map: "idx_ziroom_server_by_cloud_configuration_id")
}
